═══════════════════════════════════════════════════════════════
  ИНСТРУКЦИЯ ПО НАСТРОЙКЕ DEEPSEEK API
  для проверки релевантности изображений и фильтрации текста/логотипов
═══════════════════════════════════════════════════════════════

📋 ЧТО НУЖНО СДЕЛАТЬ:
───────────────────────────────────────────────────────────────
1. Получить API ключ от DeepSeek
2. Добавить ключ в GitHub Secrets
3. Проверить работу API

───────────────────────────────────────────────────────────────
ШАГ 1: ПОЛУЧИТЬ API КЛЮЧ ОТ DEEPSEEK
───────────────────────────────────────────────────────────────

1. Откройте сайт: https://platform.deepseek.com/
2. Зарегистрируйтесь или войдите в аккаунт
3. Перейдите в раздел "API Keys" или "API Management"
4. Создайте новый API ключ (Create New API Key)
5. Скопируйте ключ (он будет показан только один раз!)
   Формат ключа: sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

⚠️ ВАЖНО: Сохраните ключ в безопасном месте!

───────────────────────────────────────────────────────────────
ШАГ 2: ДОБАВИТЬ КЛЮЧ В GITHUB SECRETS
───────────────────────────────────────────────────────────────

1. Откройте репозиторий на GitHub:
   https://github.com/VR-Lounge/fitness-timer-autopost

2. Перейдите в Settings → Secrets and variables → Actions

3. Нажмите "New repository secret"

4. Создайте секрет с именем:
   DEEPSEEK_API_KEY

5. Вставьте скопированный API ключ в поле "Secret"

6. Нажмите "Add secret"

✅ Готово! Ключ будет доступен во всех GitHub Actions workflows

───────────────────────────────────────────────────────────────
ШАГ 3: ПРОВЕРИТЬ РАБОТУ API (ОПЦИОНАЛЬНО)
───────────────────────────────────────────────────────────────

Для проверки можно использовать curl:

curl -X POST https://api.deepseek.com/v1/chat/completions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_API_KEY_HERE" \
  -d '{
    "model": "deepseek-chat",
    "messages": [
      {"role": "user", "content": "Привет! Это тест API."}
    ]
  }'

Замените YOUR_API_KEY_HERE на ваш реальный ключ.

Если всё работает, вы получите JSON ответ с текстом ответа.

───────────────────────────────────────────────────────────────
📝 ГДЕ ИСПОЛЬЗУЕТСЯ DEEPSEEK API:
───────────────────────────────────────────────────────────────

1. image_content_matcher.py
   - Проверка релевантности изображений к контенту статьи
   - Фильтрация изображений с текстом/логотипами

2. womenshealth_parser.py
   - Выбор лучших изображений для статей

3. menshealth_parser.py
   - Выбор лучших изображений для статей

4. update_last_two_posts_images.py
   - Обновление изображений по новым правилам

───────────────────────────────────────────────────────────────
🔧 КАК РАБОТАЕТ ПРОВЕРКА:
───────────────────────────────────────────────────────────────

Когда DEEPSEEK_API_KEY настроен:

✅ Изображения проверяются на:
   - Соответствие контенту статьи (релевантность)
   - Отсутствие текста, логотипов, водяных знаков
   - Качество и пригодность для публикации

✅ Оценка от 0.0 до 1.0:
   - 1.0 = идеальное изображение
   - 0.5 = нейтральная оценка (когда API не настроен)
   - < 0.5 = низкая релевантность

⚠️ Если API не настроен:
   - Все изображения получают оценку 0.50
   - Выбираются разные изображения по индексу
   - Проверка релевантности не выполняется

───────────────────────────────────────────────────────────────
💰 СТОИМОСТЬ API:
───────────────────────────────────────────────────────────────

DeepSeek предлагает бесплатный тариф с лимитами:
- Проверьте актуальные тарифы на: https://platform.deepseek.com/pricing

Обычно:
- Первые запросы могут быть бесплатными
- Далее оплата по использованию (обычно очень дешево)

───────────────────────────────────────────────────────────────
✅ ПРОВЕРКА НАСТРОЙКИ:
───────────────────────────────────────────────────────────────

После настройки API ключа:

1. Запустите workflow вручную:
   - GitHub → Actions → womenshealth-parser.yml → Run workflow

2. Проверьте логи:
   - Должны появиться сообщения:
     "✅ DeepSeek API настроен"
     "📊 Изображение ...: оценка 0.XX, соответствует=True/False"

3. Если видите "DeepSeek не настроен, пропускаем проверку":
   - Проверьте, что ключ правильно добавлен в Secrets
   - Проверьте имя секрета: DEEPSEEK_API_KEY (точно так!)

───────────────────────────────────────────────────────────────
📞 ПОДДЕРЖКА:
───────────────────────────────────────────────────────────────

Если возникли проблемы:
1. Проверьте документацию DeepSeek: https://platform.deepseek.com/docs
2. Убедитесь, что ключ активен и не истёк
3. Проверьте лимиты использования API

═══════════════════════════════════════════════════════════════
Готово! После настройки API изображения будут проверяться
автоматически на релевантность и отсутствие текста/логотипов.
═══════════════════════════════════════════════════════════════
