#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
üî• FITNESS TIMER –ê–≤—Ç–æ–ø–æ—Å—Ç–∏–Ω–≥

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Ç–∞–±–∞—Ç–∞-—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ 
–≤ Telegram –∫–∞–Ω–∞–ª FITNESS TIMER —á–µ—Ä–µ–∑ DeepSeek AI

–ê–≤—Ç–æ—Ä: VR-Lounge
–ö–∞–Ω–∞–ª: @fitnesstimer
"""

import os
import requests
import json
import random
from datetime import datetime

# ============= –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø =============

# –ü–æ–ª—É—á–∞–µ–º —Ç–æ–∫–µ–Ω—ã –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (–¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
–î–ò–ü–°–ò–ö_–ê–ü–ò_–ö–õ–Æ–ß = os.getenv('DEEPSEEK_API_KEY', '')
–¢–ï–õ–ï–ì–†–ê–ú_–ë–û–¢_–¢–û–ö–ï–ù = os.getenv('TELEGRAM_BOT_TOKEN', '')
–¢–ï–õ–ï–ì–†–ê–ú_–ß–ê–¢_ID = os.getenv('TELEGRAM_CHAT_ID', '-1003382880193')

# –ü—É–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–ª—è –ø–æ—Å—Ç–æ–≤ (Unsplash —Ñ–∏—Ç–Ω–µ—Å)
–§–ò–¢–ù–ï–°_–ò–ó–û–ë–†–ê–ñ–ï–ù–ò–Ø = [
    'https://images.unsplash.com/photo-1517836357463-d25dfeac3438?w=1200&q=80',
    'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=1200&q=80',
    'https://images.unsplash.com/photo-1518611012118-696072aa579a?w=1200&q=80',
    'https://images.unsplash.com/photo-1599058917212-d750089bc07e?w=1200&q=80',
    'https://images.unsplash.com/photo-1541534741688-6078c6bfb5c5?w=1200&q=80'
]

# ============= –ì–ï–ù–ï–†–ê–¶–ò–Ø –ü–û–°–¢–ê –ß–ï–†–ï–ó DEEPSEEK =============

def —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å_—Ñ–∏—Ç–Ω–µ—Å_–ø–æ—Å—Ç():
    """
    –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ—Å—Ç –æ —Ç–∞–±–∞—Ç–∞-—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ —á–µ—Ä–µ–∑ DeepSeek API
    
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        str: –¢–µ–∫—Å—Ç –ø–æ—Å—Ç–∞ –∏–ª–∏ None –ø—Ä–∏ –æ—à–∏–±–∫–µ
    """
    url = 'https://api.deepseek.com/v1/chat/completions'
    
    –∑–∞–≥–æ–ª–æ–≤–∫–∏ = {
        'Authorization': f'Bearer {–î–ò–ü–°–ò–ö_–ê–ü–ò_–ö–õ–Æ–ß}',
        'Content-Type': 'application/json'
    }
    
    # –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –ò–ò
    —Å–∏—Å—Ç–µ–º–Ω—ã–π_–ø—Ä–æ–º–ø—Ç = """–¢—ã ‚Äî –∫–æ–Ω—Ç–µ–Ω—Ç-—Ä–µ–¥–∞–∫—Ç–æ—Ä Telegram-–∫–∞–Ω–∞–ª–∞ FITNESS TIMER –æ —Ç–∞–±–∞—Ç–∞-—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞—Ö, HIIT –∏ —Ñ–∏—Ç–Ω–µ—Å–µ.
–¢–≤–æ—è –∑–∞–¥–∞—á–∞: —Å–æ–∑–¥–∞–≤–∞—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –ø–æ—Å—Ç—ã —Å —Ç–∞–±–∞—Ç–∞-–ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏ –¥–ª—è –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤.

–°—Ç–∏–ª—å:
- –≠–Ω–µ—Ä–≥–∏—á–Ω—ã–π, –º–æ—Ç–∏–≤–∏—Ä—É—é—â–∏–π —Ç–æ–Ω
- –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –∏ —Å—Ö–µ–º—ã
- –ù–∞—É—á–Ω—ã–µ —Ñ–∞–∫—Ç—ã –∏ —Å–æ–≤–µ—Ç—ã
- –≠–º–æ–¥–∑–∏ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–π –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ—Å—Ç–∞:
1. –ó–∞–≥–æ–ª–æ–≤–æ–∫ (1-2 —Å—Ç—Ä–æ–∫–∏) ‚Äî —è—Ä–∫–æ –æ–±–æ–∑–Ω–∞—á—å —Ç–µ–º—É
2. –¢–∞–±–∞—Ç–∞-—Å—Ö–µ–º–∞ (8 —Ä–∞—É–Ω–¥–æ–≤ –ø–æ 20/10 —Å–µ–∫ –∏–ª–∏ –ø–æ—Ö–æ–∂–∞—è)
3. –°–ø–∏—Å–æ–∫ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π (4-6 —à—Ç—É–∫)
4. –ö—Ä–∞—Ç–∫–∏–π —Å–æ–≤–µ—Ç –ø–æ –ø–∏—Ç–∞–Ω–∏—é/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—é (1-2 —Å—Ç—Ä–æ–∫–∏)
5. –ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–∞—è —Ñ—Ä–∞–∑–∞ (1 —Å—Ç—Ä–æ–∫–∞)
6. –•—ç—à—Ç–µ–≥–∏ (3-5 —à—Ç—É–∫)

–û–±—ä—ë–º: 600-900 —Å–∏–º–≤–æ–ª–æ–≤.
–Ø–∑—ã–∫: —Ç–æ–ª—å–∫–æ —Ä—É—Å—Å–∫–∏–π."""

    # –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—É—é —Ç–µ–º—É –¥–ª—è —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è
    —Ç–µ–º—ã = [
        '–¢–∞–±–∞—Ç–∞ –¥–ª—è —Å–∂–∏–≥–∞–Ω–∏—è –∂–∏—Ä–∞',
        'HIIT –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤',
        '–ö–∞—Ä–¥–∏–æ-–≤–∑—Ä—ã–≤ –∑–∞ 4 –º–∏–Ω—É—Ç—ã',
        '–¢–∞–±–∞—Ç–∞ –¥–ª—è –Ω–æ–≥ –∏ —è–≥–æ–¥–∏—Ü',
        '–í–µ—Ä—Ö–Ω—è—è —á–∞—Å—Ç—å —Ç–µ–ª–∞: –∏–Ω—Ç–µ–Ω—Å–∏–≤',
        '–ö—Ä—É–≥–æ–≤–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –±–µ–∑ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è',
        '–¢–∞–±–∞—Ç–∞ –¥–ª—è –ø—Ä–µ—Å—Å–∞',
        '–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –Ω–∞ –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å'
    ]
    
    –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π_–ø—Ä–æ–º–ø—Ç = f"""–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –æ–¥–∏–Ω —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –ø–æ—Å—Ç –¥–ª—è –∫–∞–Ω–∞–ª–∞ FITNESS TIMER –Ω–∞ —Å–µ–≥–æ–¥–Ω—è ({datetime.now().strftime('%d.%m.%Y')}).
    
–¢–µ–º–∞: {random.choice(—Ç–µ–º—ã)}

–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:
–ó–ê–ì–û–õ–û–í–û–ö
{random.choice(['üî•', 'üí™', '‚ö°', 'üèÉ', 'üéØ'])} [—Ç–µ–∫—Å—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞]

–°–•–ï–ú–ê
‚è± [–æ–ø–∏—Å–∞–Ω–∏–µ —Ä–∞—É–Ω–¥–æ–≤ –∏ –≤—Ä–µ–º–µ–Ω–∏]

–£–ü–†–ê–ñ–ù–ï–ù–ò–Ø
‚Ä¢ [—É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 1]
‚Ä¢ [—É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 2]
... –∏ —Ç.–¥.

üí° –°–û–í–ï–¢
[—Å–æ–≤–µ—Ç –ø–æ –ø–∏—Ç–∞–Ω–∏—é –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—é]

‚ú® [–º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–∞—è —Ñ—Ä–∞–∑–∞]

#—Ç–∞–±–∞—Ç–∞ #hiit #—Ñ–∏—Ç–Ω–µ—Å [–µ—â—ë 2-3 —Ö—ç—à—Ç–µ–≥–∞]"""

    –¥–∞–Ω–Ω—ã–µ = {
        'model': 'deepseek-chat',
        'messages': [
            {'role': 'system', 'content': —Å–∏—Å—Ç–µ–º–Ω—ã–π_–ø—Ä–æ–º–ø—Ç},
            {'role': 'user', 'content': –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π_–ø—Ä–æ–º–ø—Ç}
        ],
        'temperature': 0.85,
        'max_tokens': 1000
    }
    
    try:
        –æ—Ç–≤–µ—Ç = requests.post(url, headers=–∑–∞–≥–æ–ª–æ–≤–∫–∏, json=–¥–∞–Ω–Ω—ã–µ, timeout=30)
        –æ—Ç–≤–µ—Ç.raise_for_status()
        
        —Ç–µ–∫—Å—Ç_–ø–æ—Å—Ç–∞ = –æ—Ç–≤–µ—Ç.json()['choices'][0]['message']['content']
        return —Ç–µ–∫—Å—Ç_–ø–æ—Å—Ç–∞.strip()
        
    except Exception as –æ—à–∏–±–∫–∞:
        print(f'‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ—Å—Ç–∞: {–æ—à–∏–±–∫–∞}')
        return None

# ============= –û–¢–ü–†–ê–í–ö–ê –í TELEGRAM =============

def –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–≤_—Ç–µ–ª–µ–≥—Ä–∞–º(—Ç–µ–∫—Å—Ç, url_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è=None):
    """
    –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ—Å—Ç –≤ Telegram –∫–∞–Ω–∞–ª FITNESS TIMER
    
    –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
        —Ç–µ–∫—Å—Ç (str): –¢–µ–∫—Å—Ç –ø–æ—Å—Ç–∞
        url_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (str): URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
        
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        bool: True –µ—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ, False –µ—Å–ª–∏ –æ—à–∏–±–∫–∞
    """
    
    if url_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
        # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å —Ñ–æ—Ç–æ
        url = f'https://api.telegram.org/bot{–¢–ï–õ–ï–ì–†–ê–ú_–ë–û–¢_–¢–û–ö–ï–ù}/sendPhoto'
        –¥–∞–Ω–Ω—ã–µ = {
            'chat_id': –¢–ï–õ–ï–ì–†–ê–ú_–ß–ê–¢_ID,
            'photo': url_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è,
            'caption': —Ç–µ–∫—Å—Ç,
            'parse_mode': 'HTML'
        }
    else:
        # –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–∞
        url = f'https://api.telegram.org/bot{–¢–ï–õ–ï–ì–†–ê–ú_–ë–û–¢_–¢–û–ö–ï–ù}/sendMessage'
        –¥–∞–Ω–Ω—ã–µ = {
            'chat_id': –¢–ï–õ–ï–ì–†–ê–ú_–ß–ê–¢_ID,
            'text': —Ç–µ–∫—Å—Ç,
            'parse_mode': 'HTML'
        }
    
    try:
        –æ—Ç–≤–µ—Ç = requests.post(url, json=–¥–∞–Ω–Ω—ã–µ, timeout=15)
        –æ—Ç–≤–µ—Ç.raise_for_status()
        
        —Ä–µ–∑—É–ª—å—Ç–∞—Ç = –æ—Ç–≤–µ—Ç.json()
        if —Ä–µ–∑—É–ª—å—Ç–∞—Ç.get('ok'):
            print(f"‚úÖ –ü–æ—Å—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω! Message ID: {—Ä–µ–∑—É–ª—å—Ç–∞—Ç['result']['message_id']}")
            return True
        else:
            print(f'‚ùå –û—à–∏–±–∫–∞ Telegram: {—Ä–µ–∑—É–ª—å—Ç–∞—Ç}')
            return False
            
    except Exception as –æ—à–∏–±–∫–∞:
        print(f'‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏: {–æ—à–∏–±–∫–∞}')
        return False

# ============= –ì–õ–ê–í–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø =============

def –≥–ª–∞–≤–Ω–∞—è():
    """
    –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∞–≤—Ç–æ–ø–æ—Å—Ç–∏–Ω–≥–∞:
    1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ—Å—Ç —á–µ—Ä–µ–∑ DeepSeek
    2. –í—ã–±–∏—Ä–∞–µ—Ç —Å–ª—É—á–∞–π–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
    3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ Telegram –∫–∞–Ω–∞–ª
    """
    print('üöÄ –ó–∞–ø—É—Å–∫ FITNESS TIMER –ê–≤—Ç–æ–ø–æ—Å—Ç–∏–Ω–≥...')
    print(f'üìÖ –î–∞—Ç–∞: {datetime.now().strftime("%d.%m.%Y %H:%M")}')
    print()
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ç–æ–∫–µ–Ω–æ–≤
    if not –î–ò–ü–°–ò–ö_–ê–ü–ò_–ö–õ–Æ–ß:
        print('‚ùå –û—à–∏–±–∫–∞: –Ω–µ —É–∫–∞–∑–∞–Ω DEEPSEEK_API_KEY')
        return
    
    if not –¢–ï–õ–ï–ì–†–ê–ú_–ë–û–¢_–¢–û–ö–ï–ù:
        print('‚ùå –û—à–∏–±–∫–∞: –Ω–µ —É–∫–∞–∑–∞–Ω TELEGRAM_BOT_TOKEN')
        return
    
    # 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–∞
    print('ü§ñ –ì–µ–Ω–µ—Ä–∏—Ä—É—é –ø–æ—Å—Ç —á–µ—Ä–µ–∑ DeepSeek...')
    —Ç–µ–∫—Å—Ç_–ø–æ—Å—Ç–∞ = —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å_—Ñ–∏—Ç–Ω–µ—Å_–ø–æ—Å—Ç()
    
    if not —Ç–µ–∫—Å—Ç_–ø–æ—Å—Ç–∞:
        print('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å—Ç. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ.')
        return
    
    print('‚úÖ –ü–æ—Å—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω:')
    print('-' * 50)
    print(—Ç–µ–∫—Å—Ç_–ø–æ—Å—Ç–∞)
    print('-' * 50)
    print()
    
    # 2. –í—ã–±–æ—Ä —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ = random.choice(–§–ò–¢–ù–ï–°_–ò–ó–û–ë–†–ê–ñ–ï–ù–ò–Ø)
    print(f'üñº –í—ã–±—Ä–∞–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: {–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ[:50]}...')
    print()
    
    # 3. –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram
    print('üì§ –û—Ç–ø—Ä–∞–≤–ª—è—é –≤ –∫–∞–Ω–∞–ª FITNESS TIMER...')
    —É—Å–ø–µ—Ö = –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–≤_—Ç–µ–ª–µ–≥—Ä–∞–º(—Ç–µ–∫—Å—Ç_–ø–æ—Å—Ç–∞, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
    
    if —É—Å–ø–µ—Ö:
        print()
        print('üéâ –ê–≤—Ç–æ–ø–æ—Å—Ç–∏–Ω–≥ –∑–∞–≤–µ—Ä—à—ë–Ω —É—Å–ø–µ—à–Ω–æ!')
    else:
        print()
        print('‚ö†Ô∏è –ü–æ—Å—Ç –Ω–µ –±—ã–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω.')

if __name__ == '__main__':
    –≥–ª–∞–≤–Ω–∞—è()
