name: üé≤ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π —á–µ–ª–ª–µ–Ω–¥–∂

on:
  schedule:
    # –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 08:00 –ú–°–ö (05:00 UTC)
    - cron: '0 5 * * *'
  workflow_dispatch:

jobs:
  challenge:
    name: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ–ª–ª–µ–Ω–¥–∂–∞
    runs-on: ubuntu-latest
    
    steps:
      - name: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
        uses: actions/checkout@v4
      
      - name: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      
      - name: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
        run: |
          pip install python-telegram-bot requests
      
      - name: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ–ª–ª–µ–Ω–¥–∂–∞
        env:
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
          DEEPSEEK_API_KEY: ${{ secrets.DEEPSEEK_API_KEY }}
        run: |
          python3 << 'PYTHON'
          import os
          import requests
          import random
          from datetime import datetime
          
          BOT_TOKEN = os.getenv('TELEGRAM_BOT_TOKEN')
          CHAT_ID = os.getenv('TELEGRAM_CHAT_ID')
          DEEPSEEK_KEY = os.getenv('DEEPSEEK_API_KEY')
          
          # –°–ø–∏—Å–æ–∫ —Ç–∏–ø–æ–≤ —á–µ–ª–ª–µ–Ω–¥–∂–µ–π
          challenges = [
              "20 –ø—Ä–∏—Å–µ–¥–∞–Ω–∏–π –∑–∞ 1 –º–∏–Ω—É—Ç—É",
              "–ü–ª–∞–Ω–∫–∞ 60 —Å–µ–∫—É–Ω–¥",
              "10 –æ—Ç–∂–∏–º–∞–Ω–∏–π",
              "30 —Å–µ–∫—É–Ω–¥ –±–µ—Ä–ø–∏",
              "20 –≤—ã–ø–∞–¥–æ–≤ –Ω–∞ –∫–∞–∂–¥—É—é –Ω–æ–≥—É"
          ]
          
          challenge = random.choice(challenges)
          day = datetime.now().strftime('%d.%m.%Y')
          
          post = f"""
          üé≤ **–ß–µ–ª–ª–µ–Ω–¥–∂ –¥–Ω—è {day}**
          
          üí™ –ó–∞–¥–∞–Ω–∏–µ: {challenge}
          
          ‚è±Ô∏è –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!
          
          üì∏ –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö!
          
          üî• –£–¥–∞—á–∏! –í—ã —Å–ø—Ä–∞–≤–∏—Ç–µ—Å—å!
          
          #–ß–µ–ª–ª–µ–Ω–¥–∂ #–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ #–ú–æ—Ç–∏–≤–∞—Ü–∏—è
          """
          
          send_url = f"https://api.telegram.org/bot{BOT_TOKEN}/sendMessage"
          send_params = {
              "chat_id": CHAT_ID,
              "text": post,
              "parse_mode": "Markdown"
          }
          
          response = requests.post(send_url, json=send_params)
          if response.status_code == 200:
              print("‚úÖ –ß–µ–ª–ª–µ–Ω–¥–∂ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!")
          else:
              print(f"‚ùå –û—à–∏–±–∫–∞: {response.status_code}")
          PYTHON

