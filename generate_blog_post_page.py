#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
    –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä HTML —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è —Å—Ç–∞—Ç–µ–π –±–ª–æ–≥–∞
    
    –°–æ–∑–¥–∞—ë—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ HTML —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç–∞—Ç—å–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏
    –º–µ—Ç–∞-—Ç–µ–≥–∞–º–∏, Open Graph, Schema.org –¥–ª—è SEO –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏.
    
    –ê–≤—Ç–æ—Ä: VR-Lounge
"""

import json
import re
import html
from pathlib import Path
from datetime import datetime
from urllib.parse import quote

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
try:
    from image_downloader import –∑–∞–≥—Ä—É–∑–∏—Ç—å_–≤—Å–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è_–±–ª–æ–≥–∞
except ImportError:
    # –ï—Å–ª–∏ –º–æ–¥—É–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω, —Å–æ–∑–¥–∞—ë–º –∑–∞–≥–ª—É—à–∫—É
    def –∑–∞–≥—Ä—É–∑–∏—Ç—å_–≤—Å–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è_–±–ª–æ–≥–∞():
        print("‚ö†Ô∏è –ú–æ–¥—É–ª—å image_downloader –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π")
        return False

# –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É —Å –ø–æ—Å—Ç–∞–º–∏
# –í GitHub Actions —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫–ª–æ–Ω–∏—Ä—É–µ—Ç—Å—è –≤ fitness-timer-autopost, –∞ public_html - –æ—Ç–¥–µ–ª—å–Ω–æ
SCRIPT_DIR = Path(__file__).parent.absolute()
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≥–¥–µ –º—ã –Ω–∞—Ö–æ–¥–∏–º—Å—è
REPO_ROOT = None

# –í GitHub Actions —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: fitness-timer-autopost/ –∏ public_html/ –Ω–∞ –æ–¥–Ω–æ–º —É—Ä–æ–≤–Ω–µ
if (Path.cwd().parent / 'public_html').exists():
    # –ú—ã –≤ fitness-timer-autopost, public_html –Ω–∞ —É—Ä–æ–≤–µ–Ω—å –≤—ã—à–µ (–≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏)
    REPO_ROOT = Path.cwd().parent
elif (SCRIPT_DIR.parent / 'public_html').exists():
    # –ú—ã –≤ fitness-timer-autopost, public_html –Ω–∞ —É—Ä–æ–≤–µ–Ω—å –≤—ã—à–µ
    REPO_ROOT = SCRIPT_DIR.parent
elif (SCRIPT_DIR / 'public_html').exists():
    # –ú—ã –≤ –∫–æ—Ä–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è, public_html –≤–Ω—É—Ç—Ä–∏
    REPO_ROOT = SCRIPT_DIR
elif (Path.cwd() / 'public_html').exists():
    # public_html –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
    REPO_ROOT = Path.cwd()
else:
    # –ü–æ—Å–ª–µ–¥–Ω—è—è –ø–æ–ø—ã—Ç–∫–∞ - –∏—â–µ–º public_html –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –æ—Ç —Ç–µ–∫—É—â–µ–π
    REPO_ROOT = Path.cwd().parent
    if not (REPO_ROOT / 'public_html').exists():
        # –ï—â—ë –æ–¥–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞ - –∏—â–µ–º –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –æ—Ç SCRIPT_DIR
        REPO_ROOT = SCRIPT_DIR.parent.parent
        if not (REPO_ROOT / 'public_html').exists():
            # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–∫—É—â—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∫–∞–∫ fallback
            REPO_ROOT = Path.cwd()

BLOG_POSTS_FILE = REPO_ROOT / 'public_html' / 'blog-posts.json'
BLOG_POSTS_DIR = REPO_ROOT / 'public_html' / 'blog'
BLOG_POSTS_DIR.mkdir(parents=True, exist_ok=True)

def –æ—á–∏—Å—Ç–∏—Ç—å_—Ç–µ–∫—Å—Ç_–æ—Ç_html(—Ç–µ–∫—Å—Ç):
    """–û—á–∏—â–∞–µ—Ç —Ç–µ–∫—Å—Ç –æ—Ç HTML —Ç–µ–≥–æ–≤ –¥–ª—è –º–µ—Ç–∞-–æ–ø–∏—Å–∞–Ω–∏—è"""
    if not —Ç–µ–∫—Å—Ç:
        return ''
    # –£–±–∏—Ä–∞–µ–º HTML —Ç–µ–≥–∏
    —Ç–µ–∫—Å—Ç = re.sub(r'<[^>]+>', '', —Ç–µ–∫—Å—Ç)
    # –£–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã
    —Ç–µ–∫—Å—Ç = ' '.join(—Ç–µ–∫—Å—Ç.split())
    return —Ç–µ–∫—Å—Ç

SLUG_CACHE = {}
USED_SLUGS = set()
KNOWN_SLUGS = {
    'nutrition_1': 'pravilnoe-pitanie-dlya-trenirovok-chto-est-do-i-po',
    'mens_workout_1': 'silovaya-trenirovka-dlya-muzhchin-nabiraem-massu-z',
    'womens_workout_1': 'trenirovka-dlya-devushek-stroynoe-telo-za-30-dney',
    'diet_1': 'sredizemnomorskaya-dieta-nauchno-dokazannyy-put-k-',
    'motivation_1': 'nachni-segodnya-pochemu-ne-stoit-otkladyvat-trenir'
}

def _transliterate_slug(—Ç–µ–∫—Å—Ç: str) -> str:
    —Ç—Ä–∞–Ω—Å–ª–∏—Ç = {
        '–∞': 'a', '–±': 'b', '–≤': 'v', '–≥': 'g', '–¥': 'd', '–µ': 'e', '—ë': 'yo',
        '–∂': 'zh', '–∑': 'z', '–∏': 'i', '–π': 'y', '–∫': 'k', '–ª': 'l', '–º': 'm',
        '–Ω': 'n', '–æ': 'o', '–ø': 'p', '—Ä': 'r', '—Å': 's', '—Ç': 't', '—É': 'u',
        '—Ñ': 'f', '—Ö': 'h', '—Ü': 'ts', '—á': 'ch', '—à': 'sh', '—â': 'sch',
        '—ä': '', '—ã': 'y', '—å': '', '—ç': 'e', '—é': 'yu', '—è': 'ya'
    }
    text = (—Ç–µ–∫—Å—Ç or '').lower()
    slug = ''
    for char in text:
        if char in —Ç—Ä–∞–Ω—Å–ª–∏—Ç:
            slug += —Ç—Ä–∞–Ω—Å–ª–∏—Ç[char]
        elif char.isalnum() or char in '- ':
            slug += char
        else:
            slug += '-'
    slug = re.sub(r'[-\s]+', '-', slug)
    slug = slug.strip('-')[:50]
    return slug

def —Å–æ–∑–¥–∞—Ç—å_slug(—Ç–µ–∫—Å—Ç, post_id):
    """–°–æ–∑–¥–∞—ë—Ç URL-friendly slug —Å –≥–∞—Ä–∞–Ω—Ç–∏–µ–π —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏."""
    if post_id in SLUG_CACHE:
        return SLUG_CACHE[post_id]
    if post_id in KNOWN_SLUGS:
        slug = KNOWN_SLUGS[post_id]
    else:
        slug = _transliterate_slug(—Ç–µ–∫—Å—Ç)
        if not slug:
            slug = post_id
    if slug in USED_SLUGS:
        suffix = re.sub(r'[^a-z0-9]', '', (post_id or '')[-8:].lower())
        if suffix:
            slug = f"{slug[:42]}-{suffix}"
        else:
            slug = f"{slug[:42]}-{abs(hash(post_id)) % 10000}"
    USED_SLUGS.add(slug)
    SLUG_CACHE[post_id] = slug
    return slug

def –∏–∑–≤–ª–µ—á—å_–∑–∞–≥–æ–ª–æ–≤–∫–∏_–∏–∑_—Ç–µ–∫—Å—Ç–∞(—Ç–µ–∫—Å—Ç):
    """–ò–∑–≤–ª–µ–∫–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏–∑ —Ç–µ–∫—Å—Ç–∞ –∏ —Å–æ–∑–¥–∞—ë—Ç —É–Ω–∏–∫–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É H1-H6"""
    if not —Ç–µ–∫—Å—Ç:
        return {'h1': '', 'h2': [], 'h3': [], 'h4': []}
    
    # –ò—â–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏ –≤ HTML
    h2_pattern = r'<h2[^>]*>(.*?)</h2>'
    h3_pattern = r'<h3[^>]*>(.*?)</h3>'
    h4_pattern = r'<h4[^>]*>(.*?)</h4>'
    
    h2_matches = re.findall(h2_pattern, —Ç–µ–∫—Å—Ç, re.IGNORECASE | re.DOTALL)
    h3_matches = re.findall(h3_pattern, —Ç–µ–∫—Å—Ç, re.IGNORECASE | re.DOTALL)
    h4_matches = re.findall(h4_pattern, —Ç–µ–∫—Å—Ç, re.IGNORECASE | re.DOTALL)
    
    # –û—á–∏—â–∞–µ–º –æ—Ç HTML —Ç–µ–≥–æ–≤
    def –æ—á–∏—Å—Ç–∏—Ç—å(html):
        return re.sub(r'<[^>]+>', '', html).strip()
    
    return {
        'h1': '',  # H1 –±—É–¥–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–æ–º —Å—Ç–∞—Ç—å–∏
        'h2': [–æ—á–∏—Å—Ç–∏—Ç—å(h) for h in h2_matches],
        'h3': [–æ—á–∏—Å—Ç–∏—Ç—å(h) for h in h3_matches],
        'h4': [–æ—á–∏—Å—Ç–∏—Ç—å(h) for h in h4_matches]
    }

def —Å–æ–∑–¥–∞—Ç—å_—É–Ω–∏–∫–∞–ª—å–Ω—ã–π_alt_–¥–ª—è_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è(–∑–∞–≥–æ–ª–æ–≤–æ–∫, —Ç–µ–≥–∏, –∏–Ω–¥–µ–∫—Å=0):
    """–°–æ–∑–¥–∞—ë—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π alt –∏ title –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–±–µ–∑ ID –∏ –ª–∏—à–Ω–∏—Ö —Å–ª–æ–≤)"""
    # –£–±–∏—Ä–∞–µ–º —ç–º–æ–¥–∑–∏ –∏ –ª–∏—à–Ω–∏–µ —Å–∏–º–≤–æ–ª—ã –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –¥–ª—è alt
    —á–∏—Å—Ç—ã–π_–∑–∞–≥–æ–ª–æ–≤–æ–∫ = re.sub(r'[üî•üí™üß†‚è∞üí•üö´]', '', –∑–∞–≥–æ–ª–æ–≤–æ–∫).strip()
    
    –≤–∞—Ä–∏–∞—Ü–∏–∏_alt = [
        f"{—á–∏—Å—Ç—ã–π_–∑–∞–≥–æ–ª–æ–≤–æ–∫}",
        f"–ò–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—è: {—á–∏—Å—Ç—ã–π_–∑–∞–≥–æ–ª–æ–≤–æ–∫}",
        f"–§–æ—Ç–æ –∫ —Å—Ç–∞—Ç—å–µ –æ {', '.join(—Ç–µ–≥–∏[:1]) if —Ç–µ–≥–∏ else '—Ñ–∏—Ç–Ω–µ—Å–µ'}",
        f"–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è —Å—Ç–∞—Ç—å–∏: {—á–∏—Å—Ç—ã–π_–∑–∞–≥–æ–ª–æ–≤–æ–∫}",
        f"–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è: {—á–∏—Å—Ç—ã–π_–∑–∞–≥–æ–ª–æ–≤–æ–∫}"
    ]
    
    –≤–∞—Ä–∏–∞—Ü–∏–∏_title = [
        f"{—á–∏—Å—Ç—ã–π_–∑–∞–≥–æ–ª–æ–≤–æ–∫}",
        f"–ò–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—è —Å—Ç–∞—Ç—å–∏: {—á–∏—Å—Ç—ã–π_–∑–∞–≥–æ–ª–æ–≤–æ–∫}",
        f"–§–æ—Ç–æ –¥–ª—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –æ {', '.join(—Ç–µ–≥–∏[:1]) if —Ç–µ–≥–∏ else '—Ñ–∏—Ç–Ω–µ—Å–µ'}",
        f"–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏: {—á–∏—Å—Ç—ã–π_–∑–∞–≥–æ–ª–æ–≤–æ–∫}",
        f"–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è —Å—Ç–∞—Ç—å–∏: {—á–∏—Å—Ç—ã–π_–∑–∞–≥–æ–ª–æ–≤–æ–∫}"
    ]
    
    alt = –≤–∞—Ä–∏–∞—Ü–∏–∏_alt[–∏–Ω–¥–µ–∫—Å % len(–≤–∞—Ä–∏–∞—Ü–∏–∏_alt)]
    title = –≤–∞—Ä–∏–∞—Ü–∏–∏_title[–∏–Ω–¥–µ–∫—Å % len(–≤–∞—Ä–∏–∞—Ü–∏–∏_title)]
    
    # –ù–ï –¥–æ–±–∞–≤–ª—è–µ–º ID - Google –Ω–µ –ª—é–±–∏—Ç —Å–ø–∞–º –≤ alt
    return alt, title

def —Å–æ–∑–¥–∞—Ç—å_—É–Ω–∏–∫–∞–ª—å–Ω—É—é_—Å—Å—ã–ª–∫—É_–Ω–∞_—Ç–∞–π–º–µ—Ä(—Ç–µ–∫—Å—Ç, —Ç–µ–≥–∏, –∏–Ω–¥–µ–∫—Å=0):
    """–°–æ–∑–¥–∞—ë—Ç —É–Ω–∏–∫–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É –Ω–∞ —Ç–∞–π–º–µ—Ä —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º title"""
    –≤–∞—Ä–∏–∞—Ü–∏–∏_—Ç–µ–∫—Å—Ç–∞ = [
        "–ó–∞–ø—É—Å—Ç–∏ —Ç–∞–π–º–µ—Ä TABATA",
        "–ò—Å–ø–æ–ª—å–∑—É–π —Ç–∞–π–º–µ—Ä HIIT",
        "–ù–∞—á–Ω–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É —Å —Ç–∞–π–º–µ—Ä–æ–º",
        "–û—Ç–∫—Ä–æ–π —Ç–∞–π–º–µ—Ä –¥–ª—è –∏–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫",
        "–ó–∞–ø—É—Å—Ç–∏ –æ–Ω–ª–∞–π–Ω —Ç–∞–π–º–µ—Ä",
        "–ò—Å–ø–æ–ª—å–∑—É–π —Ç–∞–π–º–µ—Ä AMRAP",
        "–ù–∞—á–Ω–∏ —Å —Ç–∞–π–º–µ—Ä–æ–º EMOM",
        "–û—Ç–∫—Ä–æ–π —Ç–∞–π–º–µ—Ä TABATATIMER.RU"
    ]
    
    –≤–∞—Ä–∏–∞—Ü–∏–∏_title = [
        f"–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–∞–π–º–µ—Ä –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏: {', '.join(—Ç–µ–≥–∏[:2])}",
        f"–û–Ω–ª–∞–π–Ω —Ç–∞–π–º–µ—Ä –¥–ª—è –∏–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ - {', '.join(—Ç–µ–≥–∏[:2])}",
        f"–¢–∞–π–º–µ—Ä TABATA, HIIT, AMRAP, EMOM –¥–ª—è {', '.join(—Ç–µ–≥–∏[:2])}",
        f"–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –æ–Ω–ª–∞–π–Ω —Ç–∞–π–º–µ—Ä –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫: {', '.join(—Ç–µ–≥–∏[:2])}",
        f"–¢–∞–π–º–µ—Ä –¥–ª—è —Ñ–∏—Ç–Ω–µ—Å–∞: {', '.join(—Ç–µ–≥–∏[:2])}",
        f"–ò–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω—ã–π —Ç–∞–π–º–µ—Ä –æ–Ω–ª–∞–π–Ω: {', '.join(—Ç–µ–≥–∏[:2])}",
        f"–¢–∞–π–º–µ—Ä —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ TABATATIMER.RU: {', '.join(—Ç–µ–≥–∏[:2])}",
        f"–û–Ω–ª–∞–π–Ω —Å–µ–∫—É–Ω–¥–æ–º–µ—Ä –¥–ª—è {', '.join(—Ç–µ–≥–∏[:2])}"
    ]
    
    —Ç–µ–∫—Å—Ç_—Å—Å—ã–ª–∫–∏ = –≤–∞—Ä–∏–∞—Ü–∏–∏_—Ç–µ–∫—Å—Ç–∞[–∏–Ω–¥–µ–∫—Å % len(–≤–∞—Ä–∏–∞—Ü–∏–∏_—Ç–µ–∫—Å—Ç–∞)]
    title_—Å—Å—ã–ª–∫–∏ = –≤–∞—Ä–∏–∞—Ü–∏–∏_title[–∏–Ω–¥–µ–∫—Å % len(–≤–∞—Ä–∏–∞—Ü–∏–∏_title)]
    
    # –î–æ–±–∞–≤–ª—è–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
    —É–Ω–∏–∫–∞–ª—å–Ω—ã–π_—Å—É—Ñ—Ñ–∏–∫—Å = f" | ID: {hash(—Ç–µ–∫—Å—Ç + str(–∏–Ω–¥–µ–∫—Å)) % 10000}"
    title_—Å—Å—ã–ª–∫–∏ += —É–Ω–∏–∫–∞–ª—å–Ω—ã–π_—Å—É—Ñ—Ñ–∏–∫—Å
    
    return —Ç–µ–∫—Å—Ç_—Å—Å—ã–ª–∫–∏, title_—Å—Å—ã–ª–∫–∏

def —Å–æ–∑–¥–∞—Ç—å_–≥–∞–ª–µ—Ä–µ—é_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π(–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∑–∞–≥–æ–ª–æ–≤–æ–∫, —Ç–µ–≥–∏):
    """
    –°–æ–∑–¥–∞—ë—Ç –≥–∞–ª–µ—Ä–µ—é-—Å–ª–∞–π–¥–µ—Ä —Å–æ –í–°–ï–ú–ò –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –∏–∑ —Å—Ç–∞—Ç—å–∏
    
    ‚úÖ –í–°–ï –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–ø–∞–¥–∞—é—Ç –≤ –≥–∞–ª–µ—Ä–µ—é:
    - –ü–µ—Ä–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ –≥–ª–∞–≤–Ω–æ–µ (–≤—ã—à–µ –≤ —Å—Ç–∞—Ç—å–µ)
    - –í–°–ï –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ —Å–ª–∞–π–¥–µ—Ä–µ —Å –ø—Ä–µ–≤—å—é—à–∫–∞–º–∏
    - –ï—Å–ª–∏ –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –≥–∞–ª–µ—Ä–µ—è –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è (–æ–Ω–æ —É–∂–µ –ø–æ–∫–∞–∑–∞–Ω–æ)
    """
    if not –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
        return ''  # –ï—Å–ª–∏ –Ω–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –≥–∞–ª–µ—Ä–µ—è –Ω–µ –Ω—É–∂–Ω–∞
    
    # ‚úÖ –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–µ—Ä–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–≥–ª–∞–≤–Ω–æ–µ), –æ–Ω–æ —É–∂–µ –ø–æ–∫–∞–∑–∞–Ω–æ –≤—ã—à–µ –≤ —Å—Ç–∞—Ç—å–µ
    # –û—Å—Ç–∞–ª—å–Ω—ã–µ –í–°–ï –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–ø–∞–¥–∞—é—Ç –≤ —Å–ª–∞–π–¥–µ—Ä
    –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è = –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è[1:] if len(–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è) > 1 else []
    
    # –ï—Å–ª–∏ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –Ω–µ —Å–æ–∑–¥–∞—ë–º –≥–∞–ª–µ—Ä–µ—é (–æ–Ω–æ —É–∂–µ –ø–æ–∫–∞–∑–∞–Ω–æ –≤—ã—à–µ)
    if not –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
        return ''
    
    # –°–æ–∑–¥–∞—ë–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –¥–ª—è –≥–∞–ª–µ—Ä–µ–∏
    gallery_id = f"gallery-{abs(hash(–∑–∞–≥–æ–ª–æ–≤–æ–∫)) % 10000}"
    
    –≥–∞–ª–µ—Ä–µ—è_html = f'''
    <div class="blog-post-gallery">
        <h3>–ò–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–∏ –∏–∑ —Å—Ç–∞—Ç—å–∏ ({len(–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)})</h3>
        <div class="blog-gallery-slider" id="{gallery_id}">
            <div class="blog-gallery-main">
                <img id="{gallery_id}-main" src="" alt="" class="blog-gallery-main-image">
                <button class="blog-gallery-prev" onclick="galleryPrev('{gallery_id}')">‚Äπ</button>
                <button class="blog-gallery-next" onclick="galleryNext('{gallery_id}')">‚Ä∫</button>
            </div>
            <div class="blog-gallery-thumbnails">
'''
    
    for idx, img_dict in enumerate(–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è):
        img_url = img_dict.get('url', '')
        if not img_url:
            continue
            
        img_alt = img_dict.get('alt', '') or f"{–∑–∞–≥–æ–ª–æ–≤–æ–∫} - —Ñ–æ—Ç–æ {idx + 2}"
        img_title = img_dict.get('title', '') or f"{–∑–∞–≥–æ–ª–æ–≤–æ–∫} - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ {idx + 2}"
        
        # –°–æ–∑–¥–∞—ë–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ alt –∏ title –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        alt, title = —Å–æ–∑–¥–∞—Ç—å_—É–Ω–∏–∫–∞–ª—å–Ω—ã–π_alt_–¥–ª—è_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è(–∑–∞–≥–æ–ª–æ–≤–æ–∫, —Ç–µ–≥–∏, idx + 1)
        if img_alt and img_alt.strip():
            alt = img_alt
        if img_title and img_title.strip():
            title = img_title
        
        # –≠–∫—Ä–∞–Ω–∏—Ä—É–µ–º –∫–∞–≤—ã—á–∫–∏ –≤ alt –∏ title
        alt = alt.replace('"', '&quot;')
        title = title.replace('"', '&quot;')
        
        # –ü–µ—Ä–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Å–ª–∞–π–¥–µ—Ä–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ä–∞–∑—É
        active_class = 'active' if idx == 0 else ''
        
        –≥–∞–ª–µ—Ä–µ—è_html += f'''
                <div class="blog-gallery-thumb {active_class}" onclick="galleryShow('{gallery_id}', {idx})">
                    <img src="{img_url}" alt="{alt}" title="{title}" loading="lazy" class="blog-gallery-thumb-image">
                </div>
'''
    
    # –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è JavaScript
    images_data = []
    for img_dict in –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
        img_url = img_dict.get('url', '')
        if img_url:
            img_alt = img_dict.get('alt', '') or f"{–∑–∞–≥–æ–ª–æ–≤–æ–∫} - —Ñ–æ—Ç–æ"
            img_title = img_dict.get('title', '') or f"{–∑–∞–≥–æ–ª–æ–≤–æ–∫} - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ"
            # –≠–∫—Ä–∞–Ω–∏—Ä—É–µ–º –¥–ª—è JavaScript
            img_alt = img_alt.replace('\\', '\\\\').replace('"', '\\"').replace("'", "\\'")
            img_title = img_title.replace('\\', '\\\\').replace('"', '\\"').replace("'", "\\'")
            images_data.append({
                'url': img_url,
                'alt': img_alt,
                'title': img_title
            })
    
    images_json = json.dumps(images_data, ensure_ascii=False)
    
    –≥–∞–ª–µ—Ä–µ—è_html += f'''
            </div>
        </div>
    </div>
    
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥–∞–ª–µ—Ä–µ–∏
        (function() {{
            const galleryId = '{gallery_id}';
            const images = {images_json};
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –≥–∞–ª–µ—Ä–µ–∏ –≤ –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç
            if (!window.blogGalleries) {{
                window.blogGalleries = {{}};
            }}
            window.blogGalleries[galleryId] = images;
            
            if (images.length > 0) {{
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                galleryShow(galleryId, 0);
            }}
        }})();
        
        function galleryShow(galleryId, index) {{
            const gallery = document.getElementById(galleryId);
            if (!gallery || !window.blogGalleries || !window.blogGalleries[galleryId]) return;
            
            const images = window.blogGalleries[galleryId];
            
            if (index < 0 || index >= images.length) return;
            
            const mainImg = document.getElementById(galleryId + '-main');
            const thumbs = gallery.querySelectorAll('.blog-gallery-thumb');
            
            if (mainImg && images[index]) {{
                mainImg.src = images[index].url;
                mainImg.alt = images[index].alt || '';
                mainImg.title = images[index].title || '';
            }}
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å
            thumbs.forEach((thumb, i) => {{
                if (i === index) {{
                    thumb.classList.add('active');
                }} else {{
                    thumb.classList.remove('active');
                }}
            }});
        }}
        
        function galleryNext(galleryId) {{
            const gallery = document.getElementById(galleryId);
            if (!gallery || !window.blogGalleries || !window.blogGalleries[galleryId]) return;
            const active = gallery.querySelector('.blog-gallery-thumb.active');
            if (!active) {{
                galleryShow(galleryId, 0);
                return;
            }}
            const thumbs = Array.from(gallery.querySelectorAll('.blog-gallery-thumb'));
            const currentIndex = thumbs.indexOf(active);
            const nextIndex = (currentIndex + 1) % thumbs.length;
            galleryShow(galleryId, nextIndex);
        }}
        
        function galleryPrev(galleryId) {{
            const gallery = document.getElementById(galleryId);
            if (!gallery || !window.blogGalleries || !window.blogGalleries[galleryId]) return;
            const active = gallery.querySelector('.blog-gallery-thumb.active');
            if (!active) {{
                const thumbs = gallery.querySelectorAll('.blog-gallery-thumb');
                galleryShow(galleryId, thumbs.length - 1);
                return;
            }}
            const thumbs = Array.from(gallery.querySelectorAll('.blog-gallery-thumb'));
            const currentIndex = thumbs.indexOf(active);
            const prevIndex = (currentIndex - 1 + thumbs.length) % thumbs.length;
            galleryShow(galleryId, prevIndex);
        }}
    </script>
'''
    return –≥–∞–ª–µ—Ä–µ—è_html

def —Å–æ–∑–¥–∞—Ç—å_–∑–∞–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã–π_–±–ª–æ–∫_–ø—Ä–æ_—Ç–∞–π–º–µ—Ä(—Ç–µ–∫—Å—Ç, —Ç–µ–≥–∏):
    """–°–æ–∑–¥–∞—ë—Ç –∑–∞–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã–π –±–ª–æ–∫ –ø—Ä–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞"""
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Ä–µ–∂–∏–º —Ç–∞–π–º–µ—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–≥–æ–≤ –∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è
    —Ä–µ–∂–∏–º_—Ç–∞–π–º–µ—Ä–∞ = None
    –æ–ø–∏—Å–∞–Ω–∏–µ_—Ä–µ–∂–∏–º–∞ = ""
    
    —Ç–µ–∫—Å—Ç_–Ω–∏–∂–Ω–∏–π = —Ç–µ–∫—Å—Ç.lower()
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ–∂–∏–º –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
    if 'tabata' in —Ç–µ–∫—Å—Ç_–Ω–∏–∂–Ω–∏–π or '—Ç–∞–±–∞—Ç–∞' in —Ç–µ–∫—Å—Ç_–Ω–∏–∂–Ω–∏–π:
        —Ä–µ–∂–∏–º_—Ç–∞–π–º–µ—Ä–∞ = 'TABATA'
        –æ–ø–∏—Å–∞–Ω–∏–µ_—Ä–µ–∂–∏–º–∞ = "–†–µ–∂–∏–º TABATA –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤—ã—Å–æ–∫–æ–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫: 20 —Å–µ–∫—É–Ω–¥ —Ä–∞–±–æ—Ç—ã –∏ 10 —Å–µ–∫—É–Ω–¥ –æ—Ç–¥—ã—Ö–∞. –≠—Ç–æ—Ç —Ä–µ–∂–∏–º –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Å–∂–∏–≥–∞—Ç—å –∫–∞–ª–æ—Ä–∏–∏ –∏ —É–ª—É—á—à–∞—Ç—å –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å."
    elif 'hiit' in —Ç–µ–∫—Å—Ç_–Ω–∏–∂–Ω–∏–π or '–≤—ã—Å–æ–∫–æ–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω' in —Ç–µ–∫—Å—Ç_–Ω–∏–∂–Ω–∏–π or '–∫–∞—Ä–¥–∏–æ' in —Ç–µ–∫—Å—Ç_–Ω–∏–∂–Ω–∏–π:
        —Ä–µ–∂–∏–º_—Ç–∞–π–º–µ—Ä–∞ = 'HIIT'
        –æ–ø–∏—Å–∞–Ω–∏–µ_—Ä–µ–∂–∏–º–∞ = "–†–µ–∂–∏–º HIIT (–≤—ã—Å–æ–∫–æ–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–∞—è –∏–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞) –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∫–∞—Ä–¥–∏–æ-–Ω–∞–≥—Ä—É–∑–æ–∫ –∏ —Å–∂–∏–≥–∞–Ω–∏—è –∂–∏—Ä–∞. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã —Ä–∞–±–æ—Ç—ã –∏ –æ—Ç–¥—ã—Ö–∞ –ø–æ–¥ —Å–≤–æ–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏."
    elif 'emom' in —Ç–µ–∫—Å—Ç_–Ω–∏–∂–Ω–∏–π or '–∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É' in —Ç–µ–∫—Å—Ç_–Ω–∏–∂–Ω–∏–π:
        —Ä–µ–∂–∏–º_—Ç–∞–π–º–µ—Ä–∞ = 'EMOM'
        –æ–ø–∏—Å–∞–Ω–∏–µ_—Ä–µ–∂–∏–º–∞ = "–†–µ–∂–∏–º EMOM (Every Minute On the Minute) –∏–¥–µ–∞–ª–µ–Ω –¥–ª—è —Å–∏–ª–æ–≤—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π. –í—ã–ø–æ–ª–Ω—è–π—Ç–µ –∑–∞–¥–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π –≤ –Ω–∞—á–∞–ª–µ –∫–∞–∂–¥–æ–π –º–∏–Ω—É—Ç—ã."
    elif 'amrap' in —Ç–µ–∫—Å—Ç_–Ω–∏–∂–Ω–∏–π or '–º–∞–∫—Å–∏–º—É–º –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π' in —Ç–µ–∫—Å—Ç_–Ω–∏–∂–Ω–∏–π:
        —Ä–µ–∂–∏–º_—Ç–∞–π–º–µ—Ä–∞ = 'AMRAP'
        –æ–ø–∏—Å–∞–Ω–∏–µ_—Ä–µ–∂–∏–º–∞ = "–†–µ–∂–∏–º AMRAP (As Many Rounds As Possible) –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∫—Ä—É–≥–æ–≤—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—É–Ω–¥–æ–≤ –∑–∞ –∑–∞–¥–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è. –û—Ç–ª–∏—á–Ω–æ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å –∏ —Å–∏–ª—É."
    else:
        # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ–º TABATA –∏–ª–∏ HIIT –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–≥–æ–≤
        if '–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞' in —Ç–µ–≥–∏ or '–ú—É–∂—á–∏–Ω–∞–º' in —Ç–µ–≥–∏ or '–î–µ–≤—É—à–∫–∞–º' in —Ç–µ–≥–∏:
            —Ä–µ–∂–∏–º_—Ç–∞–π–º–µ—Ä–∞ = 'TABATA'
            –æ–ø–∏—Å–∞–Ω–∏–µ_—Ä–µ–∂–∏–º–∞ = "–†–µ–∂–∏–º TABATA –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∏–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫: 20 —Å–µ–∫—É–Ω–¥ —Ä–∞–±–æ—Ç—ã –∏ 10 —Å–µ–∫—É–Ω–¥ –æ—Ç–¥—ã—Ö–∞. –≠—Ç–æ—Ç —Ä–µ–∂–∏–º –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Å–∂–∏–≥–∞—Ç—å –∫–∞–ª–æ—Ä–∏–∏ –∏ —É–ª—É—á—à–∞—Ç—å –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å."
        else:
            —Ä–µ–∂–∏–º_—Ç–∞–π–º–µ—Ä–∞ = 'HIIT'
            –æ–ø–∏—Å–∞–Ω–∏–µ_—Ä–µ–∂–∏–º–∞ = "–†–µ–∂–∏–º HIIT (–≤—ã—Å–æ–∫–æ–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–∞—è –∏–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞) –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã —Ä–∞–±–æ—Ç—ã –∏ –æ—Ç–¥—ã—Ö–∞ –ø–æ–¥ —Å–≤–æ–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏."
    
    # –°–æ–∑–¥–∞—ë–º —É–Ω–∏–∫–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
    —Ç–µ–∫—Å—Ç_—Å—Å—ã–ª–∫–∏, title_—Å—Å—ã–ª–∫–∏ = —Å–æ–∑–¥–∞—Ç—å_—É–Ω–∏–∫–∞–ª—å–Ω—É—é_—Å—Å—ã–ª–∫—É_–Ω–∞_—Ç–∞–π–º–µ—Ä(—Ç–µ–∫—Å—Ç, —Ç–µ–≥–∏, 999)
    
    –±–ª–æ–∫ = f'''
    <div class="blog-timer-block">
        <h3>–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω—ã–π —Ç–∞–π–º–µ—Ä –¥–ª—è —ç—Ç–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã</h3>
        <p>{–æ–ø–∏—Å–∞–Ω–∏–µ_—Ä–µ–∂–∏–º–∞}</p>
        <p>–î–ª—è —ç—Ç–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∂–∏–º <strong>{—Ä–µ–∂–∏–º_—Ç–∞–π–º–µ—Ä–∞}</strong> –Ω–∞ <a href="https://www.tabatatimer.ru/#timer" target="_blank" rel="noopener noreferrer" title="{title_—Å—Å—ã–ª–∫–∏}">tabatatimer.ru</a>. –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º:</p>
        <ul>
            <li>–°—Ç—Ä–æ–≥–æ —Å–æ–±–ª—é–¥–∞—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã —Ä–∞–±–æ—Ç—ã –∏ –æ—Ç–¥—ã—Ö–∞</li>
            <li>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Ä–µ–º—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</li>
            <li>–û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ —É–ª—É—á—à–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</li>
            <li>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –≤—ã—Å–æ–∫—É—é –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ –≤—Å–µ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</li>
        </ul>
        <p><a href="https://www.tabatatimer.ru/#timer" target="_blank" rel="noopener noreferrer" title="{title_—Å—Å—ã–ª–∫–∏}">{—Ç–µ–∫—Å—Ç_—Å—Å—ã–ª–∫–∏}</a> –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å –∏ –Ω–∞—á–Ω–∏—Ç–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ!</p>
    </div>
    '''
    return –±–ª–æ–∫

def –¥–æ–±–∞–≤–∏—Ç—å_–ø–æ—è—Å–Ω–µ–Ω–∏—è_–¥–ª—è_–∏–º—ë–Ω(—Ç–µ–∫—Å—Ç):
    """–î–æ–±–∞–≤–ª—è–µ—Ç –∫—Ä–∞—Ç–∫–∏–µ –ø–æ—è—Å–Ω–µ–Ω–∏—è –≤ —Å–∫–æ–±–∫–∞—Ö –¥–ª—è –∏–º—ë–Ω –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–π"""
    if not —Ç–µ–∫—Å—Ç:
        return —Ç–µ–∫—Å—Ç
    
    # –°–ª–æ–≤–∞—Ä—å –∏–º—ë–Ω –∏ –∏—Ö –ø–æ—è—Å–Ω–µ–Ω–∏–π
    –∏–º–µ–Ω–∞_–ø–æ—è—Å–Ω–µ–Ω–∏—è = {
        r'\b–ë—Ä—ç–Ω–¥–æ–Ω\b': '–ë—Ä—ç–Ω–¥–æ–Ω (–∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏–π —Ñ–∏—Ç–Ω–µ—Å-—Ç—Ä–µ–Ω–µ—Ä)',
        r'\bBrandon\b': 'Brandon (–∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏–π —Ñ–∏—Ç–Ω–µ—Å-—Ç—Ä–µ–Ω–µ—Ä)',
    }
    
    # –ó–∞–º–µ–Ω—è–µ–º –∏–º–µ–Ω–∞, –Ω–æ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ—Å–ª–µ –Ω–∏—Ö –Ω–µ—Ç –ø–æ—è—Å–Ω–µ–Ω–∏—è –≤ —Å–∫–æ–±–∫–∞—Ö
    for –ø–∞—Ç—Ç–µ—Ä–Ω, –∑–∞–º–µ–Ω–∞ in –∏–º–µ–Ω–∞_–ø–æ—è—Å–Ω–µ–Ω–∏—è.items():
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ—Ç –ª–∏ —É–∂–µ –ø–æ—è—Å–Ω–µ–Ω–∏—è –ø–æ—Å–ª–µ –∏–º–µ–Ω–∏ (–≤ —Å–∫–æ–±–∫–∞—Ö)
        –ø–∞—Ç—Ç–µ—Ä–Ω_—Å_–ø–æ—è—Å–Ω–µ–Ω–∏–µ–º = –ø–∞—Ç—Ç–µ—Ä–Ω.replace(r'\b', '') + r'\s*\([^)]+\)'
        if not re.search(–ø–∞—Ç—Ç–µ—Ä–Ω_—Å_–ø–æ—è—Å–Ω–µ–Ω–∏–µ–º, —Ç–µ–∫—Å—Ç, re.IGNORECASE):
            # –ó–∞–º–µ–Ω—è–µ–º –∏–º—è –Ω–∞ –∏–º—è —Å –ø–æ—è—Å–Ω–µ–Ω–∏–µ–º
            —Ç–µ–∫—Å—Ç = re.sub(–ø–∞—Ç—Ç–µ—Ä–Ω, –∑–∞–º–µ–Ω–∞, —Ç–µ–∫—Å—Ç, flags=re.IGNORECASE)
    
    return —Ç–µ–∫—Å—Ç

def —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å_—Ç–µ–∫—Å—Ç_–¥–ª—è_html(—Ç–µ–∫—Å—Ç, –∑–∞–≥–æ–ª–æ–≤–æ–∫, —Ç–µ–≥–∏):
    """
    –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç –¥–ª—è HTML —Å —á–∏—Å—Ç–æ–π, —á–∏—Ç–∞–±–µ–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:
    - –£–±–∏—Ä–∞–µ—Ç –∫–∞–ø—Å –∏ –∑–≤—ë–∑–¥–æ—á–∫–∏
    - –†–∞–∑–±–∏–≤–∞–µ—Ç –¥–ª–∏–Ω–Ω—ã–µ –∞–±–∑–∞—Ü—ã –Ω–∞ –∫–æ—Ä–æ—Ç–∫–∏–µ (2-4 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)
    - –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ñ–æ—Ä–º–ª—è–µ—Ç —Å–ø–∏—Å–∫–∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π
    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å <section>
    """
    if not —Ç–µ–∫—Å—Ç:
        return ''
    
    # –î–æ–±–∞–≤–ª—è–µ–º –ø–æ—è—Å–Ω–µ–Ω–∏—è –¥–ª—è –∏–º—ë–Ω –ø–µ—Ä–µ–¥ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
    —Ç–µ–∫—Å—Ç = –¥–æ–±–∞–≤–∏—Ç—å_–ø–æ—è—Å–Ω–µ–Ω–∏—è_–¥–ª—è_–∏–º—ë–Ω(—Ç–µ–∫—Å—Ç)
    
    # –£–¥–∞–ª—è–µ–º –≤—Å–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ tabatatimer.ru –∏–∑ –Ω–∞—á–∞–ª–∞ —Ç–µ–∫—Å—Ç–∞
    —Ç–µ–∫—Å—Ç = re.sub(r'^.*?tabatatimer\.ru.*?\n', '', —Ç–µ–∫—Å—Ç, flags=re.IGNORECASE | re.MULTILINE)
    —Ç–µ–∫—Å—Ç = re.sub(r'^.*?–ó–∞–ø—É—Å—Ç–∏ —Ç–∞–π–º–µ—Ä.*?\n', '', —Ç–µ–∫—Å—Ç, flags=re.IGNORECASE | re.MULTILINE)
    
    # –£–±–∏—Ä–∞–µ–º –≤—Å–µ —ç–º–æ–¥–∑–∏
    —Ç–µ–∫—Å—Ç = re.sub(r'[üî•üí™üß†‚è∞üí•üö´‚úÖ‚ùå‚ö†Ô∏èüìùüì∏üñºÔ∏èüîçüì•‚òÅÔ∏è]', '', —Ç–µ–∫—Å—Ç)
    
    # –†–∞–∑–±–∏–≤–∞–µ–º —Ç–µ–∫—Å—Ç –Ω–∞ —Å—Ç—Ä–æ–∫–∏
    —Å—Ç—Ä–æ–∫–∏ = —Ç–µ–∫—Å—Ç.split('\n')
    –±–ª–æ–∫–∏ = []
    —Ç–µ–∫—É—â–∏–π_–∞–±–∑–∞—Ü = []
    —Ç–µ–∫—É—â–∏–π_—Å–ø–∏—Å–æ–∫ = []
    –≤_—Å–ø–∏—Å–∫–µ = False
    —Å–ø–∏—Å–æ–∫_–Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π = False
    
    # –°–ø–∏—Å–æ–∫ –Ω–∞–∑–≤–∞–Ω–∏–π —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
    –Ω–∞–∑–≤–∞–Ω–∏—è_—É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π = [
        '–ø—Ä–∏—Å–µ–¥–∞–Ω–∏—è', '–≤—ã–ø–∞–¥—ã', '–ø—Ä—ã–∂–∫–∏', '–ø–æ–¥—ä—ë–º—ã', '–æ—Ç–∂–∏–º–∞–Ω–∏—è', '—Å–∫—Ä—É—á–∏–≤–∞–Ω–∏—è', 
        '–ø–ª–∞–Ω–∫–∞', '–±—ë—Ä–ø–∏', '–∞–ª—å–ø–∏–Ω–∏—Å—Ç', '–≤–µ–ª–æ—Å–∏–ø–µ–¥', '–º–æ—Å—Ç–∏–∫', '–º–∞—Ö–∏', '–∂–∏–º',
        '–ø–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è', '—Ç—è–≥–∞', '—Å—Ç–∞–Ω–æ–≤–∞—è', '–±–∏—Ü–µ–ø—Å', '—Ç—Ä–∏—Ü–µ–ø—Å', '–ø–ª–µ—á–∏'
    ]
    
    def —É–±—Ä–∞—Ç—å_–∫–∞–ø—Å_–∏_—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å(—Ç–µ–∫—Å—Ç_—Å—Ç—Ä–æ–∫–∏):
        """–£–±–∏—Ä–∞–µ—Ç –∫–∞–ø—Å, –∑–≤—ë–∑–¥–æ—á–∫–∏, —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç"""
        # –£–±–∏—Ä–∞–µ–º markdown –∑–≤—ë–∑–¥–æ—á–∫–∏
        —Ç–µ–∫—Å—Ç_—Å—Ç—Ä–æ–∫–∏ = re.sub(r'\*\*([^*]+)\*\*', r'\1', —Ç–µ–∫—Å—Ç_—Å—Ç—Ä–æ–∫–∏)
        —Ç–µ–∫—Å—Ç_—Å—Ç—Ä–æ–∫–∏ = re.sub(r'\*([^*]+)\*', r'\1', —Ç–µ–∫—Å—Ç_—Å—Ç—Ä–æ–∫–∏)
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤–µ—Å—å –ª–∏ —Ç–µ–∫—Å—Ç –≤ –∫–∞–ø—Å–µ
        if —Ç–µ–∫—Å—Ç_—Å—Ç—Ä–æ–∫–∏.isupper() and len(—Ç–µ–∫—Å—Ç_—Å—Ç—Ä–æ–∫–∏) > 20:
            # –ï—Å–ª–∏ –¥–ª–∏–Ω–Ω—ã–π –∫–∞–ø—Å-–∞–±–∑–∞—Ü, —Ä–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∏ –¥–µ–ª–∞–µ–º –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç
            –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è = re.split(r'[.!?]\s+', —Ç–µ–∫—Å—Ç_—Å—Ç—Ä–æ–∫–∏)
            –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ = []
            for –ø—Ä–µ–¥–ª in –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:
                –ø—Ä–µ–¥–ª = –ø—Ä–µ–¥–ª.strip()
                if –ø—Ä–µ–¥–ª:
                    # –ü–µ—Ä–≤—É—é –±—É–∫–≤—É –¥–µ–ª–∞–µ–º –∑–∞–≥–ª–∞–≤–Ω–æ–π, –æ—Å—Ç–∞–ª—å–Ω—ã–µ - —Å—Ç—Ä–æ—á–Ω—ã–º–∏
                    –ø—Ä–µ–¥–ª = –ø—Ä–µ–¥–ª[0].upper() + –ø—Ä–µ–¥–ª[1:].lower() if len(–ø—Ä–µ–¥–ª) > 1 else –ø—Ä–µ–¥–ª.upper()
                    –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ.append(–ø—Ä–µ–¥–ª)
            return '. '.join(–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ) + '.'
        elif —Ç–µ–∫—Å—Ç_—Å—Ç—Ä–æ–∫–∏.isupper() and len(—Ç–µ–∫—Å—Ç_—Å—Ç—Ä–æ–∫–∏) <= 20:
            # –ö–æ—Ä–æ—Ç–∫–∏–π –∫–∞–ø—Å - –¥–µ–ª–∞–µ–º <strong> —Å –Ω–æ—Ä–º–∞–ª—å–Ω—ã–º —Ä–µ–≥–∏—Å—Ç—Ä–æ–º
            –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π = —Ç–µ–∫—Å—Ç_—Å—Ç—Ä–æ–∫–∏[0].upper() + —Ç–µ–∫—Å—Ç_—Å—Ç—Ä–æ–∫–∏[1:].lower() if len(—Ç–µ–∫—Å—Ç_—Å—Ç—Ä–æ–∫–∏) > 1 else —Ç–µ–∫—Å—Ç_—Å—Ç—Ä–æ–∫–∏
            return f'<strong>{–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π}</strong>'
        
        # –ï—Å–ª–∏ –µ—Å—Ç—å —á–∞—Å—Ç–∏ –≤ –∫–∞–ø—Å–µ –≤–Ω—É—Ç—Ä–∏ —Ç–µ–∫—Å—Ç–∞, –∑–∞–º–µ–Ω—è–µ–º –Ω–∞ <strong>
        def –∑–∞–º–µ–Ω–∏—Ç—å_–∫–∞–ø—Å_—á–∞—Å—Ç–∏(match):
            –∫–∞–ø—Å_—Ç–µ–∫—Å—Ç = match.group(0)
            if len(–∫–∞–ø—Å_—Ç–µ–∫—Å—Ç) > 30:
                # –î–ª–∏–Ω–Ω—ã–π –∫–∞–ø—Å - –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ–º
                –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π = –∫–∞–ø—Å_—Ç–µ–∫—Å—Ç[0].upper() + –∫–∞–ø—Å_—Ç–µ–∫—Å—Ç[1:].lower() if len(–∫–∞–ø—Å_—Ç–µ–∫—Å—Ç) > 1 else –∫–∞–ø—Å_—Ç–µ–∫—Å—Ç
                return –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π
            else:
                # –ö–æ—Ä–æ—Ç–∫–∏–π –∫–∞–ø—Å - –¥–µ–ª–∞–µ–º <strong>
                –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π = –∫–∞–ø—Å_—Ç–µ–∫—Å—Ç[0].upper() + –∫–∞–ø—Å_—Ç–µ–∫—Å—Ç[1:].lower() if len(–∫–∞–ø—Å_—Ç–µ–∫—Å—Ç) > 1 else –∫–∞–ø—Å_—Ç–µ–∫—Å—Ç
                return f'<strong>{–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π}</strong>'
        
        # –ù–∞—Ö–æ–¥–∏–º —Å–ª–æ–≤–∞/—Ñ—Ä–∞–∑—ã –≤ –∫–∞–ø—Å–µ (2+ –∑–∞–≥–ª–∞–≤–Ω—ã—Ö –±—É–∫–≤ –ø–æ–¥—Ä—è–¥)
        —Ç–µ–∫—Å—Ç_—Å—Ç—Ä–æ–∫–∏ = re.sub(r'\b[A-Z–ê-–Ø–Å]{2,}[A-Z–ê-–Ø–Å\s]{0,30}\b', –∑–∞–º–µ–Ω–∏—Ç—å_–∫–∞–ø—Å_—á–∞—Å—Ç–∏, —Ç–µ–∫—Å—Ç_—Å—Ç—Ä–æ–∫–∏)
        
        return —Ç–µ–∫—Å—Ç_—Å—Ç—Ä–æ–∫–∏
    
    def —Ä–∞–∑–±–∏—Ç—å_–¥–ª–∏–Ω–Ω—ã–π_–∞–±–∑–∞—Ü(–∞–±–∑–∞—Ü_—Ç–µ–∫—Å—Ç):
        """–†–∞–∑–±–∏–≤–∞–µ—Ç –¥–ª–∏–Ω–Ω—ã–π –∞–±–∑–∞—Ü –Ω–∞ –∫–æ—Ä–æ—Ç–∫–∏–µ (2-4 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)"""
        # –†–∞–∑–±–∏–≤–∞–µ–º –ø–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º
        –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è = re.split(r'([.!?]\s+)', –∞–±–∑–∞—Ü_—Ç–µ–∫—Å—Ç)
        # –û–±—ä–µ–¥–∏–Ω—è–µ–º —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏
        –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–µ = []
        for i in range(0, len(–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è), 2):
            if i < len(–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è):
                –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ = –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è[i]
                if i + 1 < len(–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è):
                    –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ += –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è[i + 1]
                if –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ.strip():
                    –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–µ.append(–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ.strip())
        
        # –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ 2-4 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
        –∫–æ—Ä–æ—Ç–∫–∏–µ_–∞–±–∑–∞—Ü—ã = []
        —Ç–µ–∫—É—â–∞—è_–≥—Ä—É–ø–ø–∞ = []
        for –ø—Ä–µ–¥–ª in –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–µ:
            —Ç–µ–∫—É—â–∞—è_–≥—Ä—É–ø–ø–∞.append(–ø—Ä–µ–¥–ª)
            # –ï—Å–ª–∏ –Ω–∞–∫–æ–ø–∏–ª–∏ 2-4 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–æ–µ
            if len(—Ç–µ–∫—É—â–∞—è_–≥—Ä—É–ø–ø–∞) >= 3 or (len(—Ç–µ–∫—É—â–∞—è_–≥—Ä—É–ø–ø–∞) >= 2 and len(' '.join(—Ç–µ–∫—É—â–∞—è_–≥—Ä—É–ø–ø–∞)) > 300):
                –∫–æ—Ä–æ—Ç–∫–∏–µ_–∞–±–∑–∞—Ü—ã.append(' '.join(—Ç–µ–∫—É—â–∞—è_–≥—Ä—É–ø–ø–∞))
                —Ç–µ–∫—É—â–∞—è_–≥—Ä—É–ø–ø–∞ = []
        
        if —Ç–µ–∫—É—â–∞—è_–≥—Ä—É–ø–ø–∞:
            –∫–æ—Ä–æ—Ç–∫–∏–µ_–∞–±–∑–∞—Ü—ã.append(' '.join(—Ç–µ–∫—É—â–∞—è_–≥—Ä—É–ø–ø–∞))
        
        return –∫–æ—Ä–æ—Ç–∫–∏–µ_–∞–±–∑–∞—Ü—ã if –∫–æ—Ä–æ—Ç–∫–∏–µ_–∞–±–∑–∞—Ü—ã else [–∞–±–∑–∞—Ü_—Ç–µ–∫—Å—Ç]
    
    def —ç—Ç–æ_—É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ_–∏–ª–∏_–ø—É–Ω–∫—Ç(—Å—Ç—Ä–æ–∫–∞):
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å—Ç—Ä–æ–∫–∞ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ–º –∏–ª–∏ –ø—É–Ω–∫—Ç–æ–º —Å–ø–∏—Å–∫–∞"""
        –Ω–∏–∂–Ω–∏–π = —Å—Ç—Ä–æ–∫–∞.lower().strip()
        # –ù—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫
        if re.match(r'^\d+[\.\)]\s+', –Ω–∏–∂–Ω–∏–π):
            return True
        # –ú–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫
        if re.match(r'^[\*\-]\s+', –Ω–∏–∂–Ω–∏–π):
            return True
        # –°–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
        if any(–Ω–∞–∑–≤–∞–Ω–∏–µ in –Ω–∏–∂–Ω–∏–π for –Ω–∞–∑–≤–∞–Ω–∏–µ in –Ω–∞–∑–≤–∞–Ω–∏—è_—É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π):
            return True
        # –ö–æ—Ä–æ—Ç–∫–∞—è —Å—Ç—Ä–æ–∫–∞ (–≤–µ—Ä–æ—è—Ç–Ω–æ, –ø—É–Ω–∫—Ç —Å–ø–∏—Å–∫–∞)
        if len(–Ω–∏–∂–Ω–∏–π) < 100 and (',' in –Ω–∏–∂–Ω–∏–π or ':' in –Ω–∏–∂–Ω–∏–π):
            return True
        return False
    
    for —Å—Ç—Ä–æ–∫–∞ in —Å—Ç—Ä–æ–∫–∏:
        —Å—Ç—Ä–æ–∫–∞ = —Å—Ç—Ä–æ–∫–∞.strip()
        
        # –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
        if not —Å—Ç—Ä–æ–∫–∞:
            if —Ç–µ–∫—É—â–∏–π_–∞–±–∑–∞—Ü:
                –∞–±–∑–∞—Ü_—Ç–µ–∫—Å—Ç = ' '.join(—Ç–µ–∫—É—â–∏–π_–∞–±–∑–∞—Ü)
                # –†–∞–∑–±–∏–≤–∞–µ–º –¥–ª–∏–Ω–Ω—ã–µ –∞–±–∑–∞—Ü—ã
                –∫–æ—Ä–æ—Ç–∫–∏–µ = —Ä–∞–∑–±–∏—Ç—å_–¥–ª–∏–Ω–Ω—ã–π_–∞–±–∑–∞—Ü(–∞–±–∑–∞—Ü_—Ç–µ–∫—Å—Ç)
                for –∫–æ—Ä–æ—Ç–∫–∏–π in –∫–æ—Ä–æ—Ç–∫–∏–µ:
                    –±–ª–æ–∫–∏.append({'type': 'paragraph', 'content': –∫–æ—Ä–æ—Ç–∫–∏–π})
                —Ç–µ–∫—É—â–∏–π_–∞–±–∑–∞—Ü = []
            if —Ç–µ–∫—É—â–∏–π_—Å–ø–∏—Å–æ–∫:
                –±–ª–æ–∫–∏.append({'type': 'list', 'content': —Ç–µ–∫—É—â–∏–π_—Å–ø–∏—Å–æ–∫, 'ordered': —Å–ø–∏—Å–æ–∫_–Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π})
                —Ç–µ–∫—É—â–∏–π_—Å–ø–∏—Å–æ–∫ = []
                –≤_—Å–ø–∏—Å–∫–µ = False
                —Å–ø–∏—Å–æ–∫_–Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π = False
            continue
        
        # Markdown –∑–∞–≥–æ–ª–æ–≤–∫–∏: ##, ###
        if —Å—Ç—Ä–æ–∫–∞.startswith('##'):
            if —Ç–µ–∫—É—â–∏–π_–∞–±–∑–∞—Ü:
                –∞–±–∑–∞—Ü_—Ç–µ–∫—Å—Ç = ' '.join(—Ç–µ–∫—É—â–∏–π_–∞–±–∑–∞—Ü)
                –∫–æ—Ä–æ—Ç–∫–∏–µ = —Ä–∞–∑–±–∏—Ç—å_–¥–ª–∏–Ω–Ω—ã–π_–∞–±–∑–∞—Ü(–∞–±–∑–∞—Ü_—Ç–µ–∫—Å—Ç)
                for –∫–æ—Ä–æ—Ç–∫–∏–π in –∫–æ—Ä–æ—Ç–∫–∏–µ:
                    –±–ª–æ–∫–∏.append({'type': 'paragraph', 'content': –∫–æ—Ä–æ—Ç–∫–∏–π})
                —Ç–µ–∫—É—â–∏–π_–∞–±–∑–∞—Ü = []
            if —Ç–µ–∫—É—â–∏–π_—Å–ø–∏—Å–æ–∫:
                –±–ª–æ–∫–∏.append({'type': 'list', 'content': —Ç–µ–∫—É—â–∏–π_—Å–ø–∏—Å–æ–∫, 'ordered': —Å–ø–∏—Å–æ–∫_–Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π})
                —Ç–µ–∫—É—â–∏–π_—Å–ø–∏—Å–æ–∫ = []
                –≤_—Å–ø–∏—Å–∫–µ = False
                —Å–ø–∏—Å–æ–∫_–Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π = False
            
            —Ç–µ–∫—Å—Ç_–∑–∞–≥–æ–ª–æ–≤–∫–∞ = re.sub(r'^#+\s*', '', —Å—Ç—Ä–æ–∫–∞).strip()
            —Ç–µ–∫—Å—Ç_–∑–∞–≥–æ–ª–æ–≤–∫–∞ = —É–±—Ä–∞—Ç—å_–∫–∞–ø—Å_–∏_—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å(—Ç–µ–∫—Å—Ç_–∑–∞–≥–æ–ª–æ–≤–∫–∞)
            # –£–±–∏—Ä–∞–µ–º HTML —Ç–µ–≥–∏ –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ (–æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç)
            —Ç–µ–∫—Å—Ç_–∑–∞–≥–æ–ª–æ–≤–∫–∞ = re.sub(r'<[^>]+>', '', —Ç–µ–∫—Å—Ç_–∑–∞–≥–æ–ª–æ–≤–∫–∞)
            
            if —Å—Ç—Ä–æ–∫–∞.startswith('###'):
                –±–ª–æ–∫–∏.append({'type': 'h3', 'content': —Ç–µ–∫—Å—Ç_–∑–∞–≥–æ–ª–æ–≤–∫–∞})
            else:
                –±–ª–æ–∫–∏.append({'type': 'h2', 'content': —Ç–µ–∫—Å—Ç_–∑–∞–≥–æ–ª–æ–≤–∫–∞})
            continue
        
        # –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ª–∏–Ω–∏—è: ---
        if —Å—Ç—Ä–æ–∫–∞.startswith('---') or —Å—Ç—Ä–æ–∫–∞ == '---':
            if —Ç–µ–∫—É—â–∏–π_–∞–±–∑–∞—Ü:
                –±–ª–æ–∫–∏.append({'type': 'paragraph', 'content': ' '.join(—Ç–µ–∫—É—â–∏–π_–∞–±–∑–∞—Ü)})
                —Ç–µ–∫—É—â–∏–π_–∞–±–∑–∞—Ü = []
            if —Ç–µ–∫—É—â–∏–π_—Å–ø–∏—Å–æ–∫:
                –±–ª–æ–∫–∏.append({'type': 'list', 'content': —Ç–µ–∫—É—â–∏–π_—Å–ø–∏—Å–æ–∫, 'ordered': —Å–ø–∏—Å–æ–∫_–Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π})
                —Ç–µ–∫—É—â–∏–π_—Å–ø–∏—Å–æ–∫ = []
                –≤_—Å–ø–∏—Å–∫–µ = False
                —Å–ø–∏—Å–æ–∫_–Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π = False
            –±–ª–æ–∫–∏.append({'type': 'hr', 'content': ''})
            continue
        
        # –ù—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫: 1. –ø—É–Ω–∫—Ç –∏–ª–∏ 1) –ø—É–Ω–∫—Ç
        if re.match(r'^\d+[\.\)]\s+', —Å—Ç—Ä–æ–∫–∞):
            if —Ç–µ–∫—É—â–∏–π_–∞–±–∑–∞—Ü:
                –∞–±–∑–∞—Ü_—Ç–µ–∫—Å—Ç = ' '.join(—Ç–µ–∫—É—â–∏–π_–∞–±–∑–∞—Ü)
                –∫–æ—Ä–æ—Ç–∫–∏–µ = —Ä–∞–∑–±–∏—Ç—å_–¥–ª–∏–Ω–Ω—ã–π_–∞–±–∑–∞—Ü(–∞–±–∑–∞—Ü_—Ç–µ–∫—Å—Ç)
                for –∫–æ—Ä–æ—Ç–∫–∏–π in –∫–æ—Ä–æ—Ç–∫–∏–µ:
                    –±–ª–æ–∫–∏.append({'type': 'paragraph', 'content': –∫–æ—Ä–æ—Ç–∫–∏–π})
                —Ç–µ–∫—É—â–∏–π_–∞–±–∑–∞—Ü = []
            if –≤_—Å–ø–∏—Å–∫–µ and —Ç–µ–∫—É—â–∏–π_—Å–ø–∏—Å–æ–∫ and not —Å–ø–∏—Å–æ–∫_–Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π:
                –±–ª–æ–∫–∏.append({'type': 'list', 'content': —Ç–µ–∫—É—â–∏–π_—Å–ø–∏—Å–æ–∫, 'ordered': False})
                —Ç–µ–∫—É—â–∏–π_—Å–ø–∏—Å–æ–∫ = []
            –≤_—Å–ø–∏—Å–∫–µ = True
            —Å–ø–∏—Å–æ–∫_–Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π = True
            –ø—É–Ω–∫—Ç = re.sub(r'^\d+[\.\)]\s+', '', —Å—Ç—Ä–æ–∫–∞)
            –ø—É–Ω–∫—Ç = —É–±—Ä–∞—Ç—å_–∫–∞–ø—Å_–∏_—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å(–ø—É–Ω–∫—Ç)
            # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º markdown —Å—Å—ã–ª–∫–∏
            –ø—É–Ω–∫—Ç = re.sub(r'\[([^\]]+)\]\(([^)]+)\)', r'<a href="\2" target="_blank" rel="noopener noreferrer">\1</a>', –ø—É–Ω–∫—Ç)
            —Ç–µ–∫—É—â–∏–π_—Å–ø–∏—Å–æ–∫.append(–ø—É–Ω–∫—Ç)
            continue
        
        # –ú–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫: * –ø—É–Ω–∫—Ç –∏–ª–∏ - –ø—É–Ω–∫—Ç
        if re.match(r'^[\*\-]\s+', —Å—Ç—Ä–æ–∫–∞):
            if —Ç–µ–∫—É—â–∏–π_–∞–±–∑–∞—Ü:
                –∞–±–∑–∞—Ü_—Ç–µ–∫—Å—Ç = ' '.join(—Ç–µ–∫—É—â–∏–π_–∞–±–∑–∞—Ü)
                –∫–æ—Ä–æ—Ç–∫–∏–µ = —Ä–∞–∑–±–∏—Ç—å_–¥–ª–∏–Ω–Ω—ã–π_–∞–±–∑–∞—Ü(–∞–±–∑–∞—Ü_—Ç–µ–∫—Å—Ç)
                for –∫–æ—Ä–æ—Ç–∫–∏–π in –∫–æ—Ä–æ—Ç–∫–∏–µ:
                    –±–ª–æ–∫–∏.append({'type': 'paragraph', 'content': –∫–æ—Ä–æ—Ç–∫–∏–π})
                —Ç–µ–∫—É—â–∏–π_–∞–±–∑–∞—Ü = []
            if –≤_—Å–ø–∏—Å–∫–µ and —Ç–µ–∫—É—â–∏–π_—Å–ø–∏—Å–æ–∫ and —Å–ø–∏—Å–æ–∫_–Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π:
                –±–ª–æ–∫–∏.append({'type': 'list', 'content': —Ç–µ–∫—É—â–∏–π_—Å–ø–∏—Å–æ–∫, 'ordered': True})
                —Ç–µ–∫—É—â–∏–π_—Å–ø–∏—Å–æ–∫ = []
            –≤_—Å–ø–∏—Å–∫–µ = True
            —Å–ø–∏—Å–æ–∫_–Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π = False
            –ø—É–Ω–∫—Ç = re.sub(r'^[\*\-]\s+', '', —Å—Ç—Ä–æ–∫–∞)
            –ø—É–Ω–∫—Ç = —É–±—Ä–∞—Ç—å_–∫–∞–ø—Å_–∏_—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å(–ø—É–Ω–∫—Ç)
            # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º markdown —Å—Å—ã–ª–∫–∏
            –ø—É–Ω–∫—Ç = re.sub(r'\[([^\]]+)\]\(([^)]+)\)', r'<a href="\2" target="_blank" rel="noopener noreferrer">\1</a>', –ø—É–Ω–∫—Ç)
            —Ç–µ–∫—É—â–∏–π_—Å–ø–∏—Å–æ–∫.append(–ø—É–Ω–∫—Ç)
            continue
        
        # –ó–∞–≥–æ–ª–æ–≤–æ–∫ h3 –∏–ª–∏ h4 (—Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç —Å **)
        if —Å—Ç—Ä–æ–∫–∞.startswith('**') and —Å—Ç—Ä–æ–∫–∞.endswith('**') and len(—Å—Ç—Ä–æ–∫–∞) > 4:
            if —Ç–µ–∫—É—â–∏–π_–∞–±–∑–∞—Ü:
                –±–ª–æ–∫–∏.append({'type': 'paragraph', 'content': ' '.join(—Ç–µ–∫—É—â–∏–π_–∞–±–∑–∞—Ü)})
                —Ç–µ–∫—É—â–∏–π_–∞–±–∑–∞—Ü = []
            if —Ç–µ–∫—É—â–∏–π_—Å–ø–∏—Å–æ–∫:
                –±–ª–æ–∫–∏.append({'type': 'list', 'content': —Ç–µ–∫—É—â–∏–π_—Å–ø–∏—Å–æ–∫, 'ordered': —Å–ø–∏—Å–æ–∫_–Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π})
                —Ç–µ–∫—É—â–∏–π_—Å–ø–∏—Å–æ–∫ = []
                –≤_—Å–ø–∏—Å–∫–µ = False
                —Å–ø–∏—Å–æ–∫_–Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π = False
            
            —Ç–µ–∫—Å—Ç_–∑–∞–≥–æ–ª–æ–≤–∫–∞ = —Å—Ç—Ä–æ–∫–∞.replace('**', '')
            if re.match(r'^–î–µ–Ω—å\s+\d+:', —Ç–µ–∫—Å—Ç_–∑–∞–≥–æ–ª–æ–≤–∫–∞, re.IGNORECASE):
                –±–ª–æ–∫–∏.append({'type': 'h4', 'content': —Ç–µ–∫—Å—Ç_–∑–∞–≥–æ–ª–æ–≤–∫–∞})
            else:
                –±–ª–æ–∫–∏.append({'type': 'h3', 'content': —Ç–µ–∫—Å—Ç_–∑–∞–≥–æ–ª–æ–≤–∫–∞})
            continue
        
        # –°—Ç—Ä–æ–∫–∞ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è (—Å–ø–∏—Å–æ–∫)
        if —ç—Ç–æ_—É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ_–∏–ª–∏_–ø—É–Ω–∫—Ç(—Å—Ç—Ä–æ–∫–∞):
            if —Ç–µ–∫—É—â–∏–π_–∞–±–∑–∞—Ü:
                –±–ª–æ–∫–∏.append({'type': 'paragraph', 'content': ' '.join(—Ç–µ–∫—É—â–∏–π_–∞–±–∑–∞—Ü)})
                —Ç–µ–∫—É—â–∏–π_–∞–±–∑–∞—Ü = []
            –≤_—Å–ø–∏—Å–∫–µ = True
            # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Å—Ç—Ä–æ–∫—É —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
            –ø—É–Ω–∫—Ç = —É–±—Ä–∞—Ç—å_–∫–∞–ø—Å_–∏_—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å(—Å—Ç—Ä–æ–∫–∞)
            # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º markdown —Å—Å—ã–ª–∫–∏
            –ø—É–Ω–∫—Ç = re.sub(r'\[([^\]]+)\]\(([^)]+)\)', r'<a href="\2" target="_blank" rel="noopener noreferrer">\1</a>', –ø—É–Ω–∫—Ç)
            —Ç–µ–∫—É—â–∏–π_—Å–ø–∏—Å–æ–∫.append(–ø—É–Ω–∫—Ç)
            continue
        
        # –û–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç - –∑–∞–∫—Ä—ã–≤–∞–µ–º —Å–ø–∏—Å–æ–∫ –µ—Å–ª–∏ –±—ã–ª
        if –≤_—Å–ø–∏—Å–∫–µ:
            –±–ª–æ–∫–∏.append({'type': 'list', 'content': —Ç–µ–∫—É—â–∏–π_—Å–ø–∏—Å–æ–∫, 'ordered': —Å–ø–∏—Å–æ–∫_–Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π})
            —Ç–µ–∫—É—â–∏–π_—Å–ø–∏—Å–æ–∫ = []
            –≤_—Å–ø–∏—Å–∫–µ = False
            —Å–ø–∏—Å–æ–∫_–Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π = False
        
        # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º markdown —Å—Å—ã–ª–∫–∏
        —Å—Ç—Ä–æ–∫–∞ = re.sub(r'\[([^\]]+)\]\(([^)]+)\)', r'<a href="\2" target="_blank" rel="noopener noreferrer">\1</a>', —Å—Ç—Ä–æ–∫–∞)
        
        # –£–±–∏—Ä–∞–µ–º –∫–∞–ø—Å –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º
        —Å—Ç—Ä–æ–∫–∞ = —É–±—Ä–∞—Ç—å_–∫–∞–ø—Å_–∏_—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å(—Å—Ç—Ä–æ–∫–∞)
        
        # –≠–∫—Ä–∞–Ω–∏—Ä—É–µ–º HTML, –Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Ç–µ–≥–∏
        —á–∞—Å—Ç–∏ = re.split(r'(<[^>]+>)', —Å—Ç—Ä–æ–∫–∞)
        —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ_—á–∞—Å—Ç–∏ = []
        for —á–∞—Å—Ç—å in —á–∞—Å—Ç–∏:
            if —á–∞—Å—Ç—å.startswith('<') and —á–∞—Å—Ç—å.endswith('>'):
                —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ_—á–∞—Å—Ç–∏.append(—á–∞—Å—Ç—å)
            else:
                —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ_—á–∞—Å—Ç–∏.append(html.escape(—á–∞—Å—Ç—å))
        —Å—Ç—Ä–æ–∫–∞ = ''.join(—ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ_—á–∞—Å—Ç–∏)
        
        —Ç–µ–∫—É—â–∏–π_–∞–±–∑–∞—Ü.append(—Å—Ç—Ä–æ–∫–∞)
    
    # –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –±–ª–æ–∫–∏
    if —Ç–µ–∫—É—â–∏–π_–∞–±–∑–∞—Ü:
        –∞–±–∑–∞—Ü_—Ç–µ–∫—Å—Ç = ' '.join(—Ç–µ–∫—É—â–∏–π_–∞–±–∑–∞—Ü)
        –∫–æ—Ä–æ—Ç–∫–∏–µ = —Ä–∞–∑–±–∏—Ç—å_–¥–ª–∏–Ω–Ω—ã–π_–∞–±–∑–∞—Ü(–∞–±–∑–∞—Ü_—Ç–µ–∫—Å—Ç)
        for –∫–æ—Ä–æ—Ç–∫–∏–π in –∫–æ—Ä–æ—Ç–∫–∏–µ:
            –±–ª–æ–∫–∏.append({'type': 'paragraph', 'content': –∫–æ—Ä–æ—Ç–∫–∏–π})
    if —Ç–µ–∫—É—â–∏–π_—Å–ø–∏—Å–æ–∫:
        –±–ª–æ–∫–∏.append({'type': 'list', 'content': —Ç–µ–∫—É—â–∏–π_—Å–ø–∏—Å–æ–∫, 'ordered': —Å–ø–∏—Å–æ–∫_–Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π})
    
    # –§–æ—Ä–º–∏—Ä—É–µ–º HTML —Å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
    —Ä–µ–∑—É–ª—å—Ç–∞—Ç = []
    –≤_—Å–µ–∫—Ü–∏–∏ = False
    
    for i, –±–ª–æ–∫ in enumerate(–±–ª–æ–∫–∏):
        # –ù–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—É—é —Å–µ–∫—Ü–∏—é –ø—Ä–∏ h2
        if –±–ª–æ–∫['type'] == 'h2':
            if –≤_—Å–µ–∫—Ü–∏–∏:
                —Ä–µ–∑—É–ª—å—Ç–∞—Ç.append('</section>')
            —Ä–µ–∑—É–ª—å—Ç–∞—Ç.append('<section>')
            –≤_—Å–µ–∫—Ü–∏–∏ = True
            —Ä–µ–∑—É–ª—å—Ç–∞—Ç.append(f"<h2>{html.escape(–±–ª–æ–∫['content'])}</h2>")
        elif –±–ª–æ–∫['type'] == 'h3':
            —Ä–µ–∑—É–ª—å—Ç–∞—Ç.append(f"<h3>{html.escape(–±–ª–æ–∫['content'])}</h3>")
        elif –±–ª–æ–∫['type'] == 'lead':
            —Ä–µ–∑—É–ª—å—Ç–∞—Ç.append(f'<p class="lead">{html.escape(–±–ª–æ–∫["content"])}</p>')
        elif –±–ª–æ–∫['type'] == 'list':
            —ç–ª–µ–º–µ–Ω—Ç—ã = ''.join([f"<li>{—ç–ª–µ–º–µ–Ω—Ç}</li>" for —ç–ª–µ–º–µ–Ω—Ç in –±–ª–æ–∫['content']])
            —Ç–µ–≥_—Å–ø–∏—Å–∫–∞ = '<ol>' if –±–ª–æ–∫.get('ordered', False) else '<ul>'
            –∑–∞–∫—Ä—ã–≤–∞—é—â–∏–π_—Ç–µ–≥ = '</ol>' if –±–ª–æ–∫.get('ordered', False) else '</ul>'
            —Ä–µ–∑—É–ª—å—Ç–∞—Ç.append(f"{—Ç–µ–≥_—Å–ø–∏—Å–∫–∞}{—ç–ª–µ–º–µ–Ω—Ç—ã}{–∑–∞–∫—Ä—ã–≤–∞—é—â–∏–π_—Ç–µ–≥}")
        elif –±–ª–æ–∫['type'] == 'paragraph':
            # –ö–æ–Ω—Ç–µ–Ω—Ç —É–∂–µ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å HTML —Ç–µ–≥–∏
            —Ä–µ–∑—É–ª—å—Ç–∞—Ç.append(f"<p>{–±–ª–æ–∫['content']}</p>")
    
    # –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω—é—é —Å–µ–∫—Ü–∏—é
    if –≤_—Å–µ–∫—Ü–∏–∏:
        —Ä–µ–∑—É–ª—å—Ç–∞—Ç.append('</section>')
    
    —Ç–µ–∫—Å—Ç_html = ''.join(—Ä–µ–∑—É–ª—å—Ç–∞—Ç)
    
    # –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã–π –±–ª–æ–∫ –ø—Ä–æ —Ç–∞–π–º–µ—Ä –≤ –∫–æ–Ω–µ—Ü
    –∑–∞–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã–π_–±–ª–æ–∫ = —Å–æ–∑–¥–∞—Ç—å_–∑–∞–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã–π_–±–ª–æ–∫_–ø—Ä–æ_—Ç–∞–π–º–µ—Ä(—Ç–µ–∫—Å—Ç, —Ç–µ–≥–∏)
    —Ç–µ–∫—Å—Ç_html += –∑–∞–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã–π_–±–ª–æ–∫
    
    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è - –¥–æ–±–∞–≤–ª—è–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ alt –∏ title
    —Å—á—ë—Ç—á–∏–∫_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π = 0
    def –∑–∞–º–µ–Ω–∏—Ç—å_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ(match):
        nonlocal —Å—á—ë—Ç—á–∏–∫_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
        –ø–æ–ª–Ω—ã–π_—Ç–µ–≥ = match.group(0)
        alt, title = —Å–æ–∑–¥–∞—Ç—å_—É–Ω–∏–∫–∞–ª—å–Ω—ã–π_alt_–¥–ª—è_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è(–∑–∞–≥–æ–ª–æ–≤–æ–∫, —Ç–µ–≥–∏, —Å—á—ë—Ç—á–∏–∫_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
        —Å—á—ë—Ç—á–∏–∫_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π += 1
        
        if 'alt=' in –ø–æ–ª–Ω—ã–π_—Ç–µ–≥:
            –ø–æ–ª–Ω—ã–π_—Ç–µ–≥ = re.sub(r'alt=["\'][^"\']*["\']', f'alt="{alt}"', –ø–æ–ª–Ω—ã–π_—Ç–µ–≥)
        else:
            –ø–æ–ª–Ω—ã–π_—Ç–µ–≥ = –ø–æ–ª–Ω—ã–π_—Ç–µ–≥.replace('<img', f'<img alt="{alt}"')
        
        if 'title=' in –ø–æ–ª–Ω—ã–π_—Ç–µ–≥:
            –ø–æ–ª–Ω—ã–π_—Ç–µ–≥ = re.sub(r'title=["\'][^"\']*["\']', f'title="{title}"', –ø–æ–ª–Ω—ã–π_—Ç–µ–≥)
        else:
            –ø–æ–ª–Ω—ã–π_—Ç–µ–≥ = –ø–æ–ª–Ω—ã–π_—Ç–µ–≥.replace('<img', f'<img title="{title}"')
        
        return –ø–æ–ª–Ω—ã–π_—Ç–µ–≥
    
    —Ç–µ–∫—Å—Ç_html = re.sub(r'<img[^>]*>', –∑–∞–º–µ–Ω–∏—Ç—å_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, —Ç–µ–∫—Å—Ç_html, flags=re.IGNORECASE)
    
    return —Ç–µ–∫—Å—Ç_html

def –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å_–∑–∞–≥–æ–ª–æ–≤–æ–∫_–¥–ª—è_—Ä—É—Å—Å–∫–æ–π_–∞—É–¥–∏—Ç–æ—Ä–∏–∏(–∑–∞–≥–æ–ª–æ–≤–æ–∫, —Ç–µ–∫—Å—Ç=''):
    """
    ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏–∑ —Å–ø–∞—Ä—Å–µ–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–∏
    
    –£–¥–∞–ª–µ–Ω–∞ –≤—Å—è –ª–æ–≥–∏–∫–∞ —Å –∂–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏.
    –¢–µ–ø–µ—Ä—å –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–π —Å—Ç–∞—Ç—å–∏.
    """
    if not –∑–∞–≥–æ–ª–æ–≤–æ–∫:
        return '–°—Ç–∞—Ç—å—è –æ —Ñ–∏—Ç–Ω–µ—Å–µ'
    
    # –£–±–∏—Ä–∞–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (podcast #, episode, –∏ —Ç.–¥.)
    –∑–∞–≥–æ–ª–æ–≤–æ–∫ = re.sub(r'podcast\s*#?\s*\d+[,:]?\s*', '', –∑–∞–≥–æ–ª–æ–≤–æ–∫, flags=re.IGNORECASE)
    –∑–∞–≥–æ–ª–æ–≤–æ–∫ = re.sub(r'episode\s*#?\s*\d+[,:]?\s*', '', –∑–∞–≥–æ–ª–æ–≤–æ–∫, flags=re.IGNORECASE)
    –∑–∞–≥–æ–ª–æ–≤–æ–∫ = re.sub(r'#\s*\d+[,:]?\s*', '', –∑–∞–≥–æ–ª–æ–≤–æ–∫)  # –£–±–∏—Ä–∞–µ–º #123:
    –∑–∞–≥–æ–ª–æ–≤–æ–∫ = –∑–∞–≥–æ–ª–æ–≤–æ–∫.strip(' -‚Äî:')
    
    # ‚úÖ –í–ê–ñ–ù–û: –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞–∫ –µ—Å—Ç—å
    # –í—Å—è –ª–æ–≥–∏–∫–∞ —Å –∂–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ —É–¥–∞–ª–µ–Ω–∞
    return –∑–∞–≥–æ–ª–æ–≤–æ–∫

def —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å_html_—Å—Ç—Ä–∞–Ω–∏—Ü—É(–ø–æ—Å—Ç):
    """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç HTML —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–ª—è –ø–æ—Å—Ç–∞"""
    post_id = –ø–æ—Å—Ç.get('id', 'unknown')
    –∑–∞–≥–æ–ª–æ–≤–æ–∫_–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π = –ø–æ—Å—Ç.get('title', '–°—Ç–∞—Ç—å—è')
    —Ç–µ–∫—Å—Ç = –ø–æ—Å—Ç.get('text', '')
    
    # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏–∑ —Å–ø–∞—Ä—Å–µ–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–∏
    # –£–¥–∞–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ —Å –∂–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏
    –∑–∞–≥–æ–ª–æ–≤–æ–∫ = –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å_–∑–∞–≥–æ–ª–æ–≤–æ–∫_–¥–ª—è_—Ä—É—Å—Å–∫–æ–π_–∞—É–¥–∏—Ç–æ—Ä–∏–∏(–∑–∞–≥–æ–ª–æ–≤–æ–∫_–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π, —Ç–µ–∫—Å—Ç)
    
    –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ_url = –ø–æ—Å—Ç.get('image', 'https://www.tabatatimer.ru/images/og-image.jpg')
    –≤—Å–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è_–ø–æ—Å—Ç–∞ = –ø–æ—Å—Ç.get('images', [])  # –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    —Ç–µ–≥–∏ = –ø–æ—Å—Ç.get('tags', [])
    –¥–∞—Ç–∞_–ø—É–±–ª–∏–∫–∞—Ü–∏–∏ = –ø–æ—Å—Ç.get('date', datetime.now().isoformat())
    timestamp = –ø–æ—Å—Ç.get('timestamp', int(datetime.now().timestamp()))
    
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ –ø–æ—Å—Ç–∞, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å
    –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è = []
    if –≤—Å–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è_–ø–æ—Å—Ç–∞:
        –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è = –≤—Å–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è_–ø–æ—Å—Ç–∞
    elif –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ_url:
        # –ï—Å–ª–∏ –Ω–µ—Ç –º–∞—Å—Å–∏–≤–∞ images, —Å–æ–∑–¥–∞—ë–º –∏–∑ –≥–ª–∞–≤–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è = [{
            'url': –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ_url,
            'alt': f"{–∑–∞–≥–æ–ª–æ–≤–æ–∫} - —Ñ–æ—Ç–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –∏ —Ñ–∏—Ç–Ω–µ—Å–∞",
            'title': f"{–∑–∞–≥–æ–ª–æ–≤–æ–∫} - –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ñ–æ—Ç–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏",
            'is_main': True
        }]
    
    # –ì–ª–∞–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è Open Graph –∏ Schema.org (–ø–µ—Ä–≤–æ–µ –∏–ª–∏ –ø–æ–º–µ—á–µ–Ω–Ω–æ–µ –∫–∞–∫ –≥–ª–∞–≤–Ω–æ–µ)
    –≥–ª–∞–≤–Ω–æ–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ = None
    for img_dict in –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
        if img_dict.get('is_main', False):
            –≥–ª–∞–≤–Ω–æ–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ = img_dict
            break
    if not –≥–ª–∞–≤–Ω–æ–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ and –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
        –≥–ª–∞–≤–Ω–æ–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ = –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è[0]
    
    –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ = –≥–ª–∞–≤–Ω–æ–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ['url'] if –≥–ª–∞–≤–Ω–æ–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ else –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ_url
    
    # –°–æ–∑–¥–∞—ë–º slug –¥–ª—è URL
    # ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ï—Å–ª–∏ –≤ –ø–æ—Å—Ç–µ —É–∂–µ –µ—Å—Ç—å URL, –∏–∑–≤–ª–µ–∫–∞–µ–º slug –∏–∑ –Ω–µ–≥–æ
    # –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ slug —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ç–µ–º, —á—Ç–æ –±—ã–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ blog-posts.json
    —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π_url = –ø–æ—Å—Ç.get('url', '')
    if —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π_url and '/blog/' in —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π_url:
        # –ò–∑–≤–ª–µ–∫–∞–µ–º slug –∏–∑ URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: /blog/trenirovka-tabata-sekretnyy-klyuch-k-rezultatu.html)
        # –ò–ª–∏: https://www.tabatatimer.ru/blog/30-minute-leg-workout-circuit-for-goddess-worthy-l.html
        slug = —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π_url.split('/blog/')[-1].replace('.html', '').strip()
        if not slug:
            # –ï—Å–ª–∏ slug –ø—É—Å—Ç–æ–π, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞
            slug = —Å–æ–∑–¥–∞—Ç—å_slug(–∑–∞–≥–æ–ª–æ–≤–æ–∫, post_id)
    else:
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º slug –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞
        slug = —Å–æ–∑–¥–∞—Ç—å_slug(–∑–∞–≥–æ–ª–æ–≤–æ–∫, post_id)
    
    url = f"https://www.tabatatimer.ru/blog/{slug}.html"
    
    # –°–æ–∑–¥–∞—ë–º —á–∏—Å—Ç–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è meta description (–±–µ–∑ Markdown, –±–µ–∑ ID, –±–µ–∑ –º—É—Å–æ—Ä–∞)
    –æ–ø–∏—Å–∞–Ω–∏–µ_—Ç–µ–∫—Å—Ç = –æ—á–∏—Å—Ç–∏—Ç—å_—Ç–µ–∫—Å—Ç_–æ—Ç_html(—Ç–µ–∫—Å—Ç)
    if –æ–ø–∏—Å–∞–Ω–∏–µ_—Ç–µ–∫—Å—Ç:
        # –†–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ Markdown
        —Å—Ç—Ä–æ–∫–∏ = –æ–ø–∏—Å–∞–Ω–∏–µ_—Ç–µ–∫—Å—Ç.split('\n')
        –æ—á–∏—â–µ–Ω–Ω—ã–µ_—Å—Ç—Ä–æ–∫–∏ = []
        for —Å—Ç—Ä–æ–∫–∞ in —Å—Ç—Ä–æ–∫–∏:
            —Å—Ç—Ä–æ–∫–∞ = —Å—Ç—Ä–æ–∫–∞.strip()
            if not —Å—Ç—Ä–æ–∫–∞:
                continue
            # –£–±–∏—Ä–∞–µ–º Markdown —Å–∏–º–≤–æ–ª—ã –∏–∑ –Ω–∞—á–∞–ª–∞ —Å—Ç—Ä–æ–∫–∏
            —Å—Ç—Ä–æ–∫–∞ = re.sub(r'^#+\s*', '', —Å—Ç—Ä–æ–∫–∞)
            —Å—Ç—Ä–æ–∫–∞ = re.sub(r'^\*+\s*', '', —Å—Ç—Ä–æ–∫–∞)
            —Å—Ç—Ä–æ–∫–∞ = re.sub(r'^---+\s*', '', —Å—Ç—Ä–æ–∫–∞)
            —Å—Ç—Ä–æ–∫–∞ = re.sub(r'^\d+\.\s*', '', —Å—Ç—Ä–æ–∫–∞)  # –£–±–∏—Ä–∞–µ–º –Ω—É–º–µ—Ä–∞—Ü–∏—é
            # –£–±–∏—Ä–∞–µ–º Markdown —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
            —Å—Ç—Ä–æ–∫–∞ = re.sub(r'\*\*([^*]+)\*\*', r'\1', —Å—Ç—Ä–æ–∫–∞)  # –£–±–∏—Ä–∞–µ–º **
            —Å—Ç—Ä–æ–∫–∞ = re.sub(r'\*([^*]+)\*', r'\1', —Å—Ç—Ä–æ–∫–∞)  # –£–±–∏—Ä–∞–µ–º *
            if —Å—Ç—Ä–æ–∫–∞:
                –æ—á–∏—â–µ–Ω–Ω—ã–µ_—Å—Ç—Ä–æ–∫–∏.append(—Å—Ç—Ä–æ–∫–∞)
        
        # –°–æ–±–∏—Ä–∞–µ–º –æ–±—Ä–∞—Ç–Ω–æ –≤ —Ç–µ–∫—Å—Ç
        –æ–ø–∏—Å–∞–Ω–∏–µ_—Ç–µ–∫—Å—Ç = ' '.join(–æ—á–∏—â–µ–Ω–Ω—ã–µ_—Å—Ç—Ä–æ–∫–∏)
        
        # –ë–µ—Ä—ë–º –ø–µ—Ä–≤—ã–µ 2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è (–¥–æ 155 —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è Google)
        –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è = re.split(r'[.!?]\s+', –æ–ø–∏—Å–∞–Ω–∏–µ_—Ç–µ–∫—Å—Ç)
        –æ–ø–∏—Å–∞–Ω–∏–µ = ''
        for –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ in –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:
            if len(–æ–ø–∏—Å–∞–Ω–∏–µ + –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ) <= 155:
                –æ–ø–∏—Å–∞–Ω–∏–µ += –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ + '. '
            else:
                break
        
        –æ–ø–∏—Å–∞–Ω–∏–µ = –æ–ø–∏—Å–∞–Ω–∏–µ.strip()
        if not –æ–ø–∏—Å–∞–Ω–∏–µ or len(–æ–ø–∏—Å–∞–Ω–∏–µ) < 50:
            # –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å, –±–µ—Ä—ë–º –ø–µ—Ä–≤—ã–µ 155 —Å–∏–º–≤–æ–ª–æ–≤
            –æ–ø–∏—Å–∞–Ω–∏–µ = –æ–ø–∏—Å–∞–Ω–∏–µ_—Ç–µ–∫—Å—Ç[:155].strip()
            if len(–æ–ø–∏—Å–∞–Ω–∏–µ_—Ç–µ–∫—Å—Ç) > 155:
                –æ–ø–∏—Å–∞–Ω–∏–µ = –æ–ø–∏—Å–∞–Ω–∏–µ.rsplit(' ', 1)[0] + '...'  # –û–±—Ä–µ–∑–∞–µ–º –ø–æ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É —Å–ª–æ–≤—É
    else:
        –æ–ø–∏—Å–∞–Ω–∏–µ = f"–ü–æ–ª–µ–∑–Ω–∞—è —Å—Ç–∞—Ç—å—è –æ —Ñ–∏—Ç–Ω–µ—Å–µ –∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞—Ö. {', '.join(—Ç–µ–≥–∏)}."
    
    # –°–æ–∑–¥–∞—ë–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π Title
    —É–Ω–∏–∫–∞–ª—å–Ω—ã–π_title = f"{–∑–∞–≥–æ–ª–æ–≤–æ–∫} | –ë–ª–æ–≥ TABATATIMER.RU | {', '.join(—Ç–µ–≥–∏)}"
    
    # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –¥–∞—Ç—É
    try:
        –¥–∞—Ç–∞_–æ–±—ä–µ–∫—Ç = datetime.fromisoformat(–¥–∞—Ç–∞_–ø—É–±–ª–∏–∫–∞—Ü–∏–∏.replace('Z', '+00:00'))
        –¥–∞—Ç–∞_–ø—É–±–ª–∏–∫–∞—Ü–∏–∏_iso = –¥–∞—Ç–∞_–æ–±—ä–µ–∫—Ç.strftime('%Y-%m-%d')
        –¥–∞—Ç–∞_–ø—É–±–ª–∏–∫–∞—Ü–∏–∏_ru = –¥–∞—Ç–∞_–æ–±—ä–µ–∫—Ç.strftime('%d.%m.%Y')
    except:
        –¥–∞—Ç–∞_–ø—É–±–ª–∏–∫–∞—Ü–∏–∏_iso = datetime.now().strftime('%Y-%m-%d')
        –¥–∞—Ç–∞_–ø—É–±–ª–∏–∫–∞—Ü–∏–∏_ru = datetime.now().strftime('%d.%m.%Y')
    
    # –ò–∑–≤–ª–µ–∫–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
    –∑–∞–≥–æ–ª–æ–≤–∫–∏ = –∏–∑–≤–ª–µ—á—å_–∑–∞–≥–æ–ª–æ–≤–∫–∏_–∏–∑_—Ç–µ–∫—Å—Ç–∞(—Ç–µ–∫—Å—Ç)
    
    # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç –¥–ª—è HTML —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
    —Ç–µ–∫—Å—Ç_html = —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å_—Ç–µ–∫—Å—Ç_–¥–ª—è_html(—Ç–µ–∫—Å—Ç, –∑–∞–≥–æ–ª–æ–≤–æ–∫, —Ç–µ–≥–∏)
    
    # –°–æ–∑–¥–∞—ë–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ alt –∏ title –¥–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    alt_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, title_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è = —Å–æ–∑–¥–∞—Ç—å_—É–Ω–∏–∫–∞–ª—å–Ω—ã–π_alt_–¥–ª—è_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è(–∑–∞–≥–æ–ª–æ–≤–æ–∫, —Ç–µ–≥–∏, 0)
    
    # –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑ —Ç–µ–≥–æ–≤
    –∫–ª—é—á–µ–≤—ã–µ_—Å–ª–æ–≤–∞ = ', '.join(—Ç–µ–≥–∏) + ', —Ñ–∏—Ç–Ω–µ—Å, —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏, —Ç–∞–±–∞—Ç–∞, hiit, amrap, emom'
    
    # –≠–∫—Ä–∞–Ω–∏—Ä—É–µ–º —Ñ–∏–≥—É—Ä–Ω—ã–µ —Å–∫–æ–±–∫–∏ –¥–ª—è JavaScript
    js_redirect = """if (window.location.hostname === 'tabatatimer.ru') {
            window.location.replace('https://www.tabatatimer.ru' + window.location.pathname + window.location.search + window.location.hash);
        }"""
    
    js_metrika = """(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
       m[i].l=1*new Date();
       for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
       k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
       (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

       ym(42580049, "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true,
            webvisor:true,
            trackHash:true
       });"""
    
    html = f"""<!DOCTYPE HTML>
<html lang="ru" prefix="article: http://ogp.me/ns/article#">
<head>
    <meta charset="utf-8" />
    
    <!-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç —Å tabatatimer.ru –Ω–∞ www.tabatatimer.ru -->
    <script>
        {js_redirect}
    </script>
    
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
       {js_metrika}
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/42580049" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
    
    <title>{—É–Ω–∏–∫–∞–ª—å–Ω—ã–π_title}</title>
    
    <meta name="description" content="{–æ–ø–∏—Å–∞–Ω–∏–µ}">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <meta name="author" content="TABATATIMER.RU">
    <meta name="robots" content="index, follow">
    <meta http-equiv="X-Robots-Tag" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <link rel="canonical" href="{url}">
    <link rel="alternate" hreflang="ru" href="{url}">
    <link rel="alternate" hreflang="x-default" href="{url}">
    <meta name="yandex-verification" content="5e156b77592f12f7" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="{url}">
    <meta property="og:title" content="{–∑–∞–≥–æ–ª–æ–≤–æ–∫}">
    <meta property="og:description" content="{–æ–ø–∏—Å–∞–Ω–∏–µ}">
    <meta property="og:image" content="{–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ}">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:type" content="image/jpeg">
    <meta property="og:image:alt" content="{–∑–∞–≥–æ–ª–æ–≤–æ–∫}">
    <meta property="og:locale" content="ru_RU">
    <meta property="og:site_name" content="TABATATIMER.RU">
    <meta property="article:published_time" content="{–¥–∞—Ç–∞_–ø—É–±–ª–∏–∫–∞—Ü–∏–∏_iso}">
    <meta property="article:modified_time" content="{–¥–∞—Ç–∞_–ø—É–±–ª–∏–∫–∞—Ü–∏–∏_iso}">
    <meta property="article:author" content="TABATATIMER.RU">
    <meta property="article:section" content="–§–∏—Ç–Ω–µ—Å">
    {''.join([f'<meta property="article:tag" content="{—Ç–µ–≥}">' for —Ç–µ–≥ in —Ç–µ–≥–∏])}
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="{url}">
    <meta name="twitter:title" content="{–∑–∞–≥–æ–ª–æ–≤–æ–∫}">
    <meta name="twitter:description" content="{–æ–ø–∏—Å–∞–Ω–∏–µ}">
    <meta name="twitter:image" content="{–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ}">
    
    <!-- Schema.org JSON-LD -->
    <script type="application/ld+json">
    {{
        "@context": "https://schema.org",
        "@type": "Article",
        "headline": {json.dumps(–∑–∞–≥–æ–ª–æ–≤–æ–∫)},
        "description": {json.dumps(–æ–ø–∏—Å–∞–Ω–∏–µ)},
        "image": {json.dumps(–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)},
        "datePublished": "{–¥–∞—Ç–∞_–ø—É–±–ª–∏–∫–∞—Ü–∏–∏_iso}",
        "dateModified": "{–¥–∞—Ç–∞_–ø—É–±–ª–∏–∫–∞—Ü–∏–∏_iso}",
        "author": {{
            "@type": "Organization",
            "name": "TABATATIMER.RU",
            "url": "https://www.tabatatimer.ru/"
        }},
        "publisher": {{
            "@type": "Organization",
            "name": "TABATATIMER.RU",
            "url": "https://www.tabatatimer.ru/",
            "logo": {{
                "@type": "ImageObject",
                "url": "https://www.tabatatimer.ru/images/og-image.jpg"
            }}
        }},
        "mainEntityOfPage": {{
            "@type": "WebPage",
            "@id": {json.dumps(url)}
        }},
        "keywords": {json.dumps(–∫–ª—é—á–µ–≤—ã–µ_—Å–ª–æ–≤–∞)}
    }}
    </script>
    
    <!-- Breadcrumb Schema -->
    <script type="application/ld+json">
    {{
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {{
                "@type": "ListItem",
                "position": 1,
                "name": "–ì–ª–∞–≤–Ω–∞—è",
                "item": "https://www.tabatatimer.ru/"
            }},
            {{
                "@type": "ListItem",
                "position": 2,
                "name": "–ë–ª–æ–≥",
                "item": "https://www.tabatatimer.ru/blog.html"
            }},
            {{
                "@type": "ListItem",
                "position": 3,
                "name": {json.dumps(–∑–∞–≥–æ–ª–æ–≤–æ–∫)},
                "item": {json.dumps(url)}
            }}
        ]
    }}
    </script>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="../favicon.ico">
    
    <!-- CSS -->
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/burger-menu.css">
    <link rel="stylesheet" href="../assets/css/font-awesome.min.css">
    
    <style>
        html, body {{
            overflow-x: hidden;
            margin: 0;
            padding: 0;
        }}
        
        .blog-post-page {{
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
            color: rgba(255, 255, 255, 0.9);
            background: #1a1a1a;
            min-height: 100vh;
        }}
        
        .blog-post-header {{
            margin-bottom: 40px;
        }}
        
        .blog-post-title {{
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: #fff;
            line-height: 1.2;
        }}
        
        .blog-post-meta {{
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 30px;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }}
        
        .blog-post-image {{
            width: 100%;
            max-height: 500px;
            object-fit: cover;
            border-radius: 12px;
            margin-bottom: 30px;
        }}
        
        .blog-post-gallery {{
            margin: 40px 0;
            padding: 30px 0;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }}
        
        .blog-post-gallery h3 {{
            font-size: 1.5rem;
            margin: 0 0 20px 0;
            color: #7af5ff;
        }}
        
        .blog-gallery-slider {{
            position: relative;
        }}
        
        .blog-gallery-main {{
            position: relative;
            margin-bottom: 20px;
            border-radius: 12px;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.05);
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
        }}
        
        .blog-gallery-main-image {{
            width: 100%;
            height: auto;
            max-height: 600px;
            object-fit: contain;
            display: block;
        }}
        
        .blog-gallery-prev,
        .blog-gallery-next {{
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(122, 245, 255, 0.8);
            border: none;
            color: #1a1a1a;
            font-size: 2rem;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
        }}
        
        .blog-gallery-prev {{
            left: 15px;
        }}
        
        .blog-gallery-next {{
            right: 15px;
        }}
        
        .blog-gallery-prev:hover,
        .blog-gallery-next:hover {{
            background: #7af5ff;
            transform: translateY(-50%) scale(1.1);
        }}
        
        .blog-gallery-thumbnails {{
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding: 10px 0;
            scrollbar-width: thin;
            scrollbar-color: rgba(122, 245, 255, 0.3) transparent;
        }}
        
        .blog-gallery-thumbnails::-webkit-scrollbar {{
            height: 8px;
        }}
        
        .blog-gallery-thumbnails::-webkit-scrollbar-track {{
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }}
        
        .blog-gallery-thumbnails::-webkit-scrollbar-thumb {{
            background: rgba(122, 245, 255, 0.3);
            border-radius: 4px;
        }}
        
        .blog-gallery-thumbnails::-webkit-scrollbar-thumb:hover {{
            background: rgba(122, 245, 255, 0.5);
        }}
        
        .blog-gallery-thumb {{
            flex-shrink: 0;
            width: 120px;
            height: 120px;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.05);
        }}
        
        .blog-gallery-thumb:hover {{
            border-color: rgba(122, 245, 255, 0.5);
            transform: scale(1.05);
        }}
        
        .blog-gallery-thumb.active {{
            border-color: #7af5ff;
            box-shadow: 0 0 15px rgba(122, 245, 255, 0.5);
        }}
        
        .blog-gallery-thumb-image {{
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }}
        
        @media (max-width: 768px) {{
            .blog-gallery-main {{
                min-height: 300px;
            }}
            
            .blog-gallery-main-image {{
                max-height: 400px;
            }}
            
            .blog-gallery-thumb {{
                width: 80px;
                height: 80px;
            }}
            
            .blog-gallery-prev,
            .blog-gallery-next {{
                width: 40px;
                height: 40px;
                font-size: 1.5rem;
            }}
        }}
        
        .blog-post-content {{
            line-height: 1.8;
            font-size: 1.1rem;
        }}
        
        .blog-post-content section {{
            margin: 40px 0;
            padding: 0;
        }}
        
        .blog-post-content section:first-of-type {{
            margin-top: 0;
        }}
        
        .blog-post-content section:last-of-type {{
            margin-bottom: 0;
        }}
        
        .blog-post-content h2 {{
            font-size: 1.8rem;
            margin: 30px 0 20px 0;
            color: #7af5ff;
            font-weight: 600;
            line-height: 1.3;
        }}
        
        .blog-post-content section > h2:first-child {{
            margin-top: 0;
        }}
        
        .blog-post-content h3 {{
            font-size: 1.5rem;
            margin: 30px 0 12px 0;
            color: rgba(255, 255, 255, 0.9);
        }}
        
        .blog-post-content h3:first-of-type {{
            margin-top: 40px;
        }}
        
        .blog-post-content h4 {{
            font-size: 1.2rem;
            margin: 20px 0 10px 0;
            color: rgba(255, 255, 255, 0.85);
        }}
        
        .blog-post-content p {{
            margin: 0 0 15px 0;
        }}
        
        .blog-post-content p.lead {{
            font-size: 1.3rem;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.95);
            margin: 20px 0 25px 0;
            line-height: 1.6;
        }}
        
        .blog-post-content hr {{
            border: none;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            margin: 30px 0;
        }}
        
        .blog-post-content ul,
        .blog-post-content ol {{
            margin: 20px 0 25px 0;
            padding-left: 30px;
            line-height: 1.7;
        }}
        
        .blog-post-content li {{
            margin: 10px 0;
            line-height: 1.7;
            padding-left: 5px;
        }}
        
        .blog-post-content ul li {{
            list-style-type: disc;
        }}
        
        .blog-post-content ol li {{
            list-style-type: decimal;
        }}
        
        .blog-post-content a {{
            color: #7af5ff;
            text-decoration: none;
        }}
        
        .blog-post-content a:hover {{
            text-decoration: underline;
        }}
        
        .blog-post-tags {{
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 30px;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }}
        
        .blog-post-tag {{
            padding: 5px 12px;
            background: rgba(122, 245, 255, 0.1);
            border: 1px solid rgba(122, 245, 255, 0.3);
            border-radius: 20px;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
            color: rgba(255, 255, 255, 0.8);
        }}
        
        .blog-post-tag:hover {{
            background: rgba(122, 245, 255, 0.2);
            border-color: #7af5ff;
            color: #7af5ff;
            transform: translateY(-2px);
        }}
        
        .blog-timer-block {{
            margin-top: 40px;
            padding: 30px;
            background: rgba(122, 245, 255, 0.05);
            border: 1px solid rgba(122, 245, 255, 0.2);
            border-radius: 12px;
        }}
        
        .blog-timer-block h3 {{
            color: #7af5ff;
            margin-top: 0;
            margin-bottom: 20px;
            font-size: 1.3rem;
        }}
        
        .blog-timer-block ul {{
            margin: 15px 0;
            padding-left: 25px;
        }}
        
        .blog-timer-block li {{
            margin: 8px 0;
            color: rgba(255, 255, 255, 0.8);
        }}
        
        .blog-timer-block a {{
            color: #7af5ff;
            text-decoration: none;
        }}
        
        .blog-timer-block a:hover {{
            text-decoration: underline;
        }}
        
        .blog-post-back {{
            display: inline-block;
            margin-bottom: 30px;
            color: #7af5ff;
            text-decoration: none;
            font-size: 0.9rem;
        }}
        
        .blog-post-back:hover {{
            text-decoration: underline;
        }}
        
        /* –ë–ª–æ–∫ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ Telegram –∫–∞–Ω–∞–ª */
        .blog-subscribe-footer {{
            margin-top: 60px;
            padding: 40px 20px;
            background: linear-gradient(135deg, rgba(122, 245, 255, 0.08) 0%, rgba(122, 245, 255, 0.03) 100%);
            border-top: 1px solid rgba(122, 245, 255, 0.15);
        }}
        
        .blog-subscribe-container {{
            max-width: 800px;
            margin: 0 auto;
        }}
        
        .blog-subscribe-content {{
            text-align: center;
        }}
        
        .blog-subscribe-title {{
            font-size: 1.5rem;
            color: #7af5ff;
            margin: 0 0 15px 0;
            font-weight: 600;
        }}
        
        .blog-subscribe-description {{
            color: rgba(255, 255, 255, 0.85);
            font-size: 1rem;
            line-height: 1.6;
            margin: 0 0 25px 0;
        }}
        
        .blog-subscribe-description strong {{
            color: #7af5ff;
        }}
        
        .blog-subscribe-buttons {{
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }}
        
        .blog-subscribe-button {{
            display: inline-block;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 500;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            text-align: center;
        }}
        
        .blog-subscribe-button-primary {{
            padding: 12px 17px;
            background: #7af5ff;
            color: #1a1a2e;
            border-color: #7af5ff;
        }}
        
        .blog-subscribe-button-primary:hover {{
            background: #5dd5e5;
            border-color: #5dd5e5;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(122, 245, 255, 0.3);
        }}
        
        .blog-subscribe-button-secondary {{
            padding: 12px 17px;
            background: transparent;
            color: #7af5ff;
            border-color: #7af5ff;
        }}
        
        .blog-subscribe-button-secondary:hover {{
            background: rgba(122, 245, 255, 0.1);
            transform: translateY(-2px);
        }}
        
        @media (max-width: 768px) {{
            .blog-post-title {{
                font-size: 1.8rem;
            }}
            
            .blog-post-page {{
                padding: 20px 15px;
            }}
            
            .blog-subscribe-footer {{
                padding: 30px 15px;
                margin-top: 40px;
            }}
            
            .blog-subscribe-title {{
                font-size: 1.3rem;
            }}
            
            .blog-subscribe-buttons {{
                flex-wrap: wrap;
                gap: 15px;
            }}
            
            .blog-subscribe-button {{
                min-width: auto;
                flex: 1 1 auto;
                text-align: center;
                padding-left: 17px;
            }}
        }}
    </style>
</head>
<body>
    <div class="blog-post-page">
        <a href="../blog.html" class="blog-post-back">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –±–ª–æ–≥—É</a>
        
        <article class="blog-post-header">
            <h1 class="blog-post-title">{–∑–∞–≥–æ–ª–æ–≤–æ–∫}</h1>
            
            <div class="blog-post-meta">
                <span>üìÖ {–¥–∞—Ç–∞_–ø—É–±–ª–∏–∫–∞—Ü–∏–∏_ru}</span>
                <span>üè∑Ô∏è {', '.join(—Ç–µ–≥–∏)}</span>
            </div>
            
            {f'<img src="{–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ}" alt="{alt_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è}" title="{title_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è}" class="blog-post-image" loading="lazy">' if –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ else ''}
        </article>
        
        <div class="blog-post-content">
            {—Ç–µ–∫—Å—Ç_html}
            
            <!-- –ì–∞–ª–µ—Ä–µ—è –≤—Å–µ—Ö —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ —Å—Ç–∞—Ç—å–∏ -->
            {—Å–æ–∑–¥–∞—Ç—å_–≥–∞–ª–µ—Ä–µ—é_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π(–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∑–∞–≥–æ–ª–æ–≤–æ–∫, —Ç–µ–≥–∏) if –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è and len(–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è) > 1 else ''}
        </div>
        
        <div class="blog-post-tags">
            {''.join([f'<a href="../blog.html?filter={quote(—Ç–µ–≥)}" class="blog-post-tag">{—Ç–µ–≥}</a>' for —Ç–µ–≥ in —Ç–µ–≥–∏])}
        </div>
        
        <!-- –ë–ª–æ–∫ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ Telegram –∫–∞–Ω–∞–ª -->
        <footer class="blog-subscribe-footer">
            <div class="blog-subscribe-container">
                <div class="blog-subscribe-content">
                    <h3 class="blog-subscribe-title">–ë–æ–ª—å—à–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –∏ –º–æ—Ç–∏–≤–∞—Ü–∏–∏</h3>
                    <p class="blog-subscribe-description">–ü–æ–¥–ø–∏—Å—ã–≤–∞–π—Å—è –Ω–∞ –Ω–∞—à Telegram-–∫–∞–Ω–∞–ª <strong>TABATA TIMER</strong> –∏ –ø–æ–ª—É—á–∞–π –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫, —Ç–∞–π–º–µ—Ä—ã –∏ —Å–æ–≤–µ—Ç—ã –ø–æ —Ñ–∏—Ç–Ω–µ—Å—É</p>
                    <div class="blog-subscribe-buttons">
                        <a href="https://t.me/fitnesstimer" target="_blank" rel="noopener noreferrer" class="blog-subscribe-button blog-subscribe-button-primary" onclick="if(typeof ym !== 'undefined'){{ym(42580049, 'reachGoal', 'blogSubscribeTelegram');}}">
                            –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–∞–Ω–∞–ª
                        </a>
                        <a href="https://tabatatimer.ru/#timer" class="blog-subscribe-button blog-subscribe-button-secondary" onclick="if(typeof ym !== 'undefined'){{ym(42580049, 'reachGoal', 'blogToTimer');}}">
                            –û—Ç–∫—Ä—ã—Ç—å —Ç–∞–π–º–µ—Ä
                        </a>
                    </div>
                </div>
            </div>
        </footer>
    </div>
    
    <!-- Burger Menu Script -->
    <script src="../assets/js/burger-menu.js"></script>
</body>
</html>"""
    
    return html, slug

def –æ–±–Ω–æ–≤–∏—Ç—å_sitemap():
    """–û–±–Ω–æ–≤–ª—è–µ—Ç sitemap.xml —Å–æ –≤—Å–µ–º–∏ —Å—Ç–∞—Ç—å—è–º–∏ –±–ª–æ–≥–∞"""
    if not BLOG_POSTS_FILE.exists():
        return
    
    with open(BLOG_POSTS_FILE, 'r', encoding='utf-8') as f:
        data = json.load(f)
    
    –ø–æ—Å—Ç—ã = data.get('posts', [])
    
    # –ß–∏—Ç–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π sitemap –∏–ª–∏ —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π
    sitemap_file = Path('../public_html/sitemap.xml')
    sitemap_entries = []
    
    if sitemap_file.exists():
        # –ü–∞—Ä—Å–∏–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π sitemap (—É–ø—Ä–æ—â—ë–Ω–Ω–æ)
        with open(sitemap_file, 'r', encoding='utf-8') as f:
            content = f.read()
            # –ò–∑–≤–ª–µ–∫–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ URL (–∫—Ä–æ–º–µ –±–ª–æ–≥-–ø–æ—Å—Ç–æ–≤)
            import re
            urls = re.findall(r'<loc>(https://www\.tabatatimer\.ru/[^<]+)</loc>', content)
            for url in urls:
                if '/blog/' not in url:  # –ò—Å–∫–ª—é—á–∞–µ–º —Å—Ç–∞—Ä—ã–µ –±–ª–æ–≥-–ø–æ—Å—Ç—ã
                    sitemap_entries.append(url)
    
    # –î–æ–±–∞–≤–ª—è–µ–º –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ –±–ª–æ–≥, –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
    if 'https://www.tabatatimer.ru/' not in sitemap_entries:
        sitemap_entries.insert(0, 'https://www.tabatatimer.ru/')
    if 'https://www.tabatatimer.ru/blog.html' not in sitemap_entries:
        sitemap_entries.append('https://www.tabatatimer.ru/blog.html')
    
    # –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ –ø–æ—Å—Ç—ã –±–ª–æ–≥–∞
    for –ø–æ—Å—Ç in –ø–æ—Å—Ç—ã:
        post_id = –ø–æ—Å—Ç.get('id', 'unknown')
        –∑–∞–≥–æ–ª–æ–≤–æ–∫ = –ø–æ—Å—Ç.get('title', '–°—Ç–∞—Ç—å—è')
        slug = —Å–æ–∑–¥–∞—Ç—å_slug(–∑–∞–≥–æ–ª–æ–≤–æ–∫, post_id)
        url = f"https://www.tabatatimer.ru/blog/{slug}.html"
        if url not in sitemap_entries:
            sitemap_entries.append(url)
    
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º sitemap.xml
    sitemap_xml = '''<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
        xmlns:news="http://www.google.com/schemas/sitemap-news/0.9"
        xmlns:xhtml="http://www.w3.org/1999/xhtml"
        xmlns:image="http://www.google.com/schemas/sitemap-image/1.1"
        xmlns:video="http://www.google.com/schemas/sitemap-video/1.1">
'''
    
    for url in sitemap_entries:
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏ —á–∞—Å—Ç–æ—Ç—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
        if url == 'https://www.tabatatimer.ru/':
            priority = '1.0'
            changefreq = 'daily'
        elif '/blog/' in url:
            priority = '0.8'
            changefreq = 'weekly'
        else:
            priority = '0.7'
            changefreq = 'monthly'
        
        sitemap_xml += f'''   <url>
      <loc>{url}</loc>
      <changefreq>{changefreq}</changefreq>
      <priority>{priority}</priority>
   </url>
'''
    
    sitemap_xml += '</urlset>'
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º sitemap
    with open(sitemap_file, 'w', encoding='utf-8') as f:
        f.write(sitemap_xml)
    
    print(f"‚úÖ Sitemap –æ–±–Ω–æ–≤–ª—ë–Ω ({len(sitemap_entries)} URL)")

def —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å_—Å—Ç—Ä–∞–Ω–∏—Ü—ã_–¥–ª—è_–≤—Å–µ—Ö_–ø–æ—Å—Ç–æ–≤():
    """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç HTML —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –≤—Å–µ—Ö –ø–æ—Å—Ç–æ–≤ –≤ blog-posts.json"""
    if not BLOG_POSTS_FILE.exists():
        print("‚ùå –§–∞–π–ª blog-posts.json –Ω–µ –Ω–∞–π–¥–µ–Ω")
        return
    
    with open(BLOG_POSTS_FILE, 'r', encoding='utf-8') as f:
        data = json.load(f)
    
    –ø–æ—Å—Ç—ã = data.get('posts', [])
    print(f"üìù –ù–∞–π–¥–µ–Ω–æ –ø–æ—Å—Ç–æ–≤: {len(–ø–æ—Å—Ç—ã)}")

    # –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∫–µ—à–∏ slug –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏
    SLUG_CACHE.clear()
    USED_SLUGS.clear()
    
    —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ = 0
    for –ø–æ—Å—Ç in –ø–æ—Å—Ç—ã:
        try:
            html, slug = —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å_html_—Å—Ç—Ä–∞–Ω–∏—Ü—É(–ø–æ—Å—Ç)
            —Ñ–∞–π–ª = BLOG_POSTS_DIR / f"{slug}.html"
            
            with open(—Ñ–∞–π–ª, 'w', encoding='utf-8') as f:
                f.write(html)
            
            —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ += 1
            print(f"‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞: {slug}.html")
        except Exception as e:
            print(f"‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –ø–æ—Å—Ç–∞ {–ø–æ—Å—Ç.get('id', 'unknown')}: {e}")
    
    print(f"\n‚úÖ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ —Å—Ç—Ä–∞–Ω–∏—Ü: {—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ}/{len(–ø–æ—Å—Ç—ã)}")
    
    # –ó–∞–≥—Ä—É–∂–∞–µ–º –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±–ª–æ–≥–∞ –≤ Yandex Cloud
    print("\nüì§ –ó–∞–≥—Ä—É–∂–∞—é –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±–ª–æ–≥–∞ –≤ Yandex Cloud...")
    try:
        –∑–∞–≥—Ä—É–∑–∏—Ç—å_–≤—Å–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è_–±–ª–æ–≥–∞()
    except Exception as e:
        print(f"‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: {e}")
    
    # –û–±–Ω–æ–≤–ª—è–µ–º sitemap
    –æ–±–Ω–æ–≤–∏—Ç—å_sitemap()
    print("‚úÖ Sitemap –æ–±–Ω–æ–≤–ª—ë–Ω")

if __name__ == '__main__':
    —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å_—Å—Ç—Ä–∞–Ω–∏—Ü—ã_–¥–ª—è_–≤—Å–µ—Ö_–ø–æ—Å—Ç–æ–≤()
