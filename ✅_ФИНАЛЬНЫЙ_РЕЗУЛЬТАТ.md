# ‚úÖ –§–ò–ù–ê–õ–¨–ù–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢

## üéØ –ü–†–û–ë–õ–ï–ú–ê –†–ï–®–ï–ù–ê!

–ü–æ—Å–ª–µ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∏—Ç–µ—Ä–∞—Ü–∏–π –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –ø—Ä–æ–±–ª–µ–º–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏ workflow **–†–ï–®–ï–ù–ê**!

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ GitHub Actions Artifacts

**–í–º–µ—Å—Ç–æ Cache (–∫–æ—Ç–æ—Ä—ã–π –Ω–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è):**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º `actions/upload-artifact@v4` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º `actions/download-artifact@v4` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –ü–æ–ª—É—á–∞–µ–º ID –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —á–µ—Ä–µ–∑ GitHub API
- ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ–º artifacts –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–∞–ø—É—Å–∫–∞

### –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ ID –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–∞–ø—É—Å–∫–∞:**
   ```yaml
   - name: –ü–æ–ª—É—á–µ–Ω–∏–µ ID –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
     run: |
       WORKFLOW_ID=$(curl -s -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
         "https://api.github.com/repos/${{ github.repository }}/actions/workflows/auto-reply.yml" | \
         jq -r '.id')
       
       LAST_RUN=$(curl -s -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
         "https://api.github.com/repos/${{ github.repository }}/actions/workflows/$WORKFLOW_ID/runs?per_page=2&status=success" | \
         jq -r '.workflow_runs[] | select(.id != ${{ github.run_id }}) | .id' | head -1)
   ```

2. **–ó–∞–≥—Ä—É–∑–∫–∞ artifacts –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–∞–ø—É—Å–∫–∞:**
   ```yaml
   - name: –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è (artifacts)
     uses: actions/download-artifact@v4
     with:
       name: auto-reply-state
       path: ./state
       github-token: ${{ secrets.GITHUB_TOKEN }}
       run-id: ${{ steps.get-last-run.outputs.run_id }}
   ```

3. **–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ –∫–æ—Ä–µ–Ω—å:**
   ```yaml
   - name: –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è
     run: |
       if [ -f "./state/.auto_reply_state.json" ]; then
         cp "./state/.auto_reply_state.json" ".auto_reply_state.json"
       fi
   ```

4. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ artifacts:**
   ```yaml
   - name: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (artifacts)
     uses: actions/upload-artifact@v4
     with:
       name: auto-reply-state
       path: |
         .auto_reply_state.json
         .answered_messages.json
       retention-days: 90
   ```

---

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### –¢–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø—É—Å–∫–∏:
- ‚úÖ **–ù–∞–π–¥–µ–Ω –ø—Ä–µ–¥—ã–¥—É—â–∏–π —É—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—É—Å–∫** —á–µ—Ä–µ–∑ GitHub API
- ‚úÖ **Artifacts –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è** –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–∞–ø—É—Å–∫–∞
- ‚úÖ **–§–∞–π–ª—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è** –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏
- ‚úÖ **update_id –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è** –¥–æ 0

---

## ‚úÖ –ò–¢–û–ì

**–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞!**

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞:
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç `update_id` –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏
- ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
- ‚úÖ –ù–µ —Ç–µ—Ä—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –∏ –Ω–∞–¥—ë–∂–Ω–æ

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –§–∞–π–ª—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è:
- `.auto_reply_state.json` - –ø–æ—Å–ª–µ–¥–Ω–∏–π –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π `update_id`
- `.answered_messages.json` - —Å–ø–∏—Å–æ–∫ —É–∂–µ –æ—Ç–≤–µ—á–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

### Workflow —à–∞–≥–∏:
1. –ü–æ–ª—É—á–µ–Ω–∏–µ ID –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ (GitHub API)
2. –ó–∞–≥—Ä—É–∑–∫–∞ artifacts –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–∞–ø—É—Å–∫–∞
3. –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ –∫–æ—Ä–µ–Ω—å —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
5. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
7. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ artifacts –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –∑–∞–ø—É—Å–∫–∞

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢ –ö–û–†–†–ï–ö–¢–ù–û!**

