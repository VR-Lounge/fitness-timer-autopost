#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–º–µ–Ω—ã –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –¥–≤—É—Ö —Å—Ç–∞—Ç–µ–π —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –∏ —Ç–µ–∫—Å—Ç–æ–º
- –£–¥–∞–ª—è–µ—Ç markdown —Å–∏–º–≤–æ–ª—ã (***, ###)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±–µ–∑ —Ç–µ–∫—Å—Ç–∞/–ª–æ–≥–æ—Ç–∏–ø–æ–≤
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç–∞
"""

import json
import sys
import os
from pathlib import Path

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ –º–æ–¥—É–ª—è–º
sys.path.insert(0, str(Path(__file__).parent))
from text_cleaner import –æ—á–∏—Å—Ç–∏—Ç—å_—Ç–µ–∫—Å—Ç_–¥–ª—è_—Å—Ç–∞—Ç—å–∏, –æ—á–∏—Å—Ç–∏—Ç—å_—Ç–µ–∫—Å—Ç_–¥–ª—è_telegram
from image_content_matcher import –≤—ã–±—Ä–∞—Ç—å_–ª—É—á—à–µ–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ_–¥–ª—è_–∫–æ–Ω—Ç–µ–Ω—Ç–∞, –ø–æ–ª—É—á–∏—Ç—å_–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è_–∏–∑_–ø–æ—Å—Ç–æ–≤
from image_downloader import —Å–∫–∞—á–∞—Ç—å_–∏_–∑–∞–≥—Ä—É–∑–∏—Ç—å_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
from womenshealth_parser import –ø–∞—Ä—Å–∏—Ç—å_rss_feed, WOMENSHEALTH_RSS_FEEDS, –ø–∞—Ä—Å–∏—Ç—å_—Å—Ç–∞—Ç—å—é
from menshealth_parser import –ø–∞—Ä—Å–∏—Ç—å_rss_feed as mens_–ø–∞—Ä—Å–∏—Ç—å_rss_feed, MENSHEALTH_RSS_FEEDS, –ø–∞—Ä—Å–∏—Ç—å_—Å—Ç–∞—Ç—å—é as mens_–ø–∞—Ä—Å–∏—Ç—å_—Å—Ç–∞—Ç—å—é
from content_uniqueness import –ø—Ä–æ–≤–µ—Ä–∏—Ç—å_–ø–æ–ª–Ω—É—é_—É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å

# –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—É—Ç–∏
SCRIPT_DIR = Path(__file__).parent.absolute()
if (SCRIPT_DIR.parent / 'public_html').exists():
    REPO_ROOT = SCRIPT_DIR.parent
elif (SCRIPT_DIR / 'public_html').exists():
    REPO_ROOT = SCRIPT_DIR
else:
    REPO_ROOT = Path.cwd()

BLOG_POSTS_FILE = REPO_ROOT / 'public_html' / 'blog-posts.json'

def –Ω–∞–π—Ç–∏_–Ω–æ–≤—ã–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è_–∏–∑_rss(–∑–∞–≥–æ–ª–æ–≤–æ–∫, —Ç–µ–∫—Å—Ç, –∏—Å—Ç–æ—á–Ω–∏–∫):
    """–ù–∞—Ö–æ–¥–∏—Ç –Ω–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ RSS –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤"""
    print(f"üîç –ò—â—É –Ω–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ RSS –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤...")
    
    –≤—Å–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è = []
    
    # –í—ã–±–∏—Ä–∞–µ–º RSS –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –ø–æ—Å—Ç–∞
    rss_feeds = WOMENSHEALTH_RSS_FEEDS if –∏—Å—Ç–æ—á–Ω–∏–∫ == 'womenshealth' else MENSHEALTH_RSS_FEEDS
    
    # –ü–∞—Ä—Å–∏–º –±–æ–ª—å—à–µ RSS —Ñ–∏–¥–æ–≤ –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    for rss_url in rss_feeds[:15]:  # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –¥–æ 15 —Ñ–∏–¥–æ–≤
        try:
            —Å—Ç–∞—Ç—å–∏ = –ø–∞—Ä—Å–∏—Ç—å_rss_feed(rss_url) if –∏—Å—Ç–æ—á–Ω–∏–∫ == 'womenshealth' else mens_–ø–∞—Ä—Å–∏—Ç—å_rss_feed(rss_url)
            
            # –ë–µ—Ä–µ–º –ø–µ—Ä–≤—ã–µ 3 —Å—Ç–∞—Ç—å–∏ –∏–∑ –∫–∞–∂–¥–æ–≥–æ —Ñ–∏–¥–∞
            for —Å—Ç–∞—Ç—å—è in —Å—Ç–∞—Ç—å–∏[:3]:
                # –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–í–ï–†–ö–ê: –ß–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫ URL —Å—Ç–∞—Ç–µ–π
                url_—Å—Ç–∞—Ç—å–∏ = —Å—Ç–∞—Ç—å—è.get('link', '')
                BLACKLISTED_ARTICLE_URLS = [
                    'https://hiitscience.com/the-mental-taper-the-biggest-mistake-athletes-make-with-dr-scott-frey-and-dr-martin-buchheit/',
                    'hiitscience.com/the-mental-taper',  # –ß–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
                ]
                if any(blacklisted in url_—Å—Ç–∞—Ç—å–∏.lower() for blacklisted in BLACKLISTED_ARTICLE_URLS):
                    print(f"  üö´ –°—Ç–∞—Ç—å—è –≤ —á–µ—Ä–Ω–æ–º —Å–ø–∏—Å–∫–µ, –ø—Ä–æ–ø—É—Å–∫–∞—é: {url_—Å—Ç–∞—Ç—å–∏[:50]}...")
                    continue
                
                try:
                    parsed = –ø–∞—Ä—Å–∏—Ç—å_—Å—Ç–∞—Ç—å—é(url_—Å—Ç–∞—Ç—å–∏) if –∏—Å—Ç–æ—á–Ω–∏–∫ == 'womenshealth' else mens_–ø–∞—Ä—Å–∏—Ç—å_—Å—Ç–∞—Ç—å—é(url_—Å—Ç–∞—Ç—å–∏)
                    if parsed and parsed.get('images'):
                        –≤—Å–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.extend(parsed['images'])
                        print(f"  ‚úÖ –ù–∞–π–¥–µ–Ω–æ {len(parsed['images'])} –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ {url_—Å—Ç–∞—Ç—å–∏[:50]}...")
                except Exception as e:
                    continue
        except Exception as e:
            continue
    
    print(f"üì∏ –í—Å–µ–≥–æ –Ω–∞–π–¥–µ–Ω–æ {len(–≤—Å–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)} –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π")
    return –≤—Å–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

def –æ–±–Ω–æ–≤–∏—Ç—å_–ø–æ—Å—Ç(–ø–æ—Å—Ç, –≤—Å–µ_–ø–æ—Å—Ç—ã):
    """–û–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ—Å—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –∏ —Ç–µ–∫—Å—Ç–æ–º"""
    post_id = –ø–æ—Å—Ç.get('id', '')
    –∑–∞–≥–æ–ª–æ–≤–æ–∫ = –ø–æ—Å—Ç.get('title', '')
    —Ç–µ–∫—Å—Ç = –ø–æ—Å—Ç.get('text', '')
    –∏—Å—Ç–æ—á–Ω–∏–∫ = –ø–æ—Å—Ç.get('source', 'womenshealth')
    
    print(f"\n{'='*60}")
    print(f"üìù –û–±–Ω–æ–≤–ª—è—é –ø–æ—Å—Ç: {–∑–∞–≥–æ–ª–æ–≤–æ–∫[:60]}...")
    print(f"   ID: {post_id}")
    print(f"   –ò—Å—Ç–æ—á–Ω–∏–∫: {–∏—Å—Ç–æ—á–Ω–∏–∫}")
    print(f"{'='*60}")
    
    # –û—á–∏—â–∞–µ–º —Ç–µ–∫—Å—Ç –æ—Ç markdown —Å–∏–º–≤–æ–ª–æ–≤
    print("üßπ –û—á–∏—â–∞—é —Ç–µ–∫—Å—Ç –æ—Ç markdown —Å–∏–º–≤–æ–ª–æ–≤...")
    —Ç–µ–∫—Å—Ç_–æ—á–∏—â–µ–Ω–Ω—ã–π = –æ—á–∏—Å—Ç–∏—Ç—å_—Ç–µ–∫—Å—Ç_–¥–ª—è_—Å—Ç–∞—Ç—å–∏(—Ç–µ–∫—Å—Ç)
    –ø–æ—Å—Ç['text'] = —Ç–µ–∫—Å—Ç_–æ—á–∏—â–µ–Ω–Ω—ã–π
    print(f"‚úÖ –¢–µ–∫—Å—Ç –æ—á–∏—â–µ–Ω ({len(—Ç–µ–∫—Å—Ç_–æ—á–∏—â–µ–Ω–Ω—ã–π)} —Å–∏–º–≤–æ–ª–æ–≤)")
    
    # –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è = –ø–æ–ª—É—á–∏—Ç—å_–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è_–∏–∑_–ø–æ—Å—Ç–æ–≤(–≤—Å–µ_–ø–æ—Å—Ç—ã)
    print(f"üîç –ü—Ä–æ–≤–µ—Ä—è—é —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (—É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è {len(–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)} –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)")
    
    # –ò—â–µ–º –Ω–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ RSS
    –≤—Å–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è = –Ω–∞–π—Ç–∏_–Ω–æ–≤—ã–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è_–∏–∑_rss(–∑–∞–≥–æ–ª–æ–≤–æ–∫, —Ç–µ–∫—Å—Ç, –∏—Å—Ç–æ—á–Ω–∏–∫)
    
    if not –≤—Å–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
        print("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –Ω–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è")
        return False
    
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º DeepSeek AI –¥–ª—è –≤—ã–±–æ—Ä–∞ –ª—É—á—à–µ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    print(f"\nü§ñ –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é {len(–≤—Å–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)} –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ DeepSeek AI...")
    –ª—É—á—à–µ–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ = –≤—ã–±—Ä–∞—Ç—å_–ª—É—á—à–µ–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ_–¥–ª—è_–∫–æ–Ω—Ç–µ–Ω—Ç–∞(
        –≤—Å–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è,
        –∑–∞–≥–æ–ª–æ–≤–æ–∫,
        —Ç–µ–∫—Å—Ç[:2000],
        –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    )
    
    if not –ª—É—á—à–µ–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:
        print("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –ø–æ–¥—Ö–æ–¥—è—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ")
        return False
    
    img_url = –ª—É—á—à–µ–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.get('url', '')
    print(f"‚úÖ –í—ã–±—Ä–∞–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: {img_url[:80]}...")
    
    # –°–∫–∞—á–∏–≤–∞–µ–º –∏ –∑–∞–≥—Ä—É–∂–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
    print(f"üì• –°–∫–∞—á–∏–≤–∞—é –∏ –∑–∞–≥—Ä—É–∂–∞—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ...")
    –Ω–æ–≤—ã–π_url = —Å–∫–∞—á–∞—Ç—å_–∏_–∑–∞–≥—Ä—É–∑–∏—Ç—å_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ(img_url, post_id)
    
    if not –Ω–æ–≤—ã–π_url:
        print("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–∞—á–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ")
        return False
    
    print(f"‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ: {–Ω–æ–≤—ã–π_url[:80]}...")
    
    # –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ—Å—Ç
    –ø–æ—Å—Ç['image'] = –Ω–æ–≤—ã–π_url
    if 'images' not in –ø–æ—Å—Ç or not –ø–æ—Å—Ç['images']:
        –ø–æ—Å—Ç['images'] = []
    
    # –û–±–Ω–æ–≤–ª—è–µ–º –≥–ª–∞–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –º–∞—Å—Å–∏–≤–µ images
    –æ–±–Ω–æ–≤–ª–µ–Ω–æ = False
    for img in –ø–æ—Å—Ç['images']:
        if img.get('is_main', False):
            img['url'] = –Ω–æ–≤—ã–π_url
            img['alt'] = –ª—É—á—à–µ–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.get('alt', '') or f"{–∑–∞–≥–æ–ª–æ–≤–æ–∫} - —Ñ–æ—Ç–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏"
            img['title'] = –ª—É—á—à–µ–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.get('title', '') or f"{–∑–∞–≥–æ–ª–æ–≤–æ–∫} - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ"
            –æ–±–Ω–æ–≤–ª–µ–Ω–æ = True
            break
    
    if not –æ–±–Ω–æ–≤–ª–µ–Ω–æ:
        # –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–µ –≥–ª–∞–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
        –ø–æ—Å—Ç['images'].insert(0, {
            'url': –Ω–æ–≤—ã–π_url,
            'alt': –ª—É—á—à–µ–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.get('alt', '') or f"{–∑–∞–≥–æ–ª–æ–≤–æ–∫} - —Ñ–æ—Ç–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏",
            'title': –ª—É—á—à–µ–µ_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.get('title', '') or f"{–∑–∞–≥–æ–ª–æ–≤–æ–∫} - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ",
            'is_main': True
        })
    
    print(f"‚úÖ –ü–æ—Å—Ç –æ–±–Ω–æ–≤–ª—ë–Ω: {post_id}")
    return True

def main():
    """–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è"""
    if not BLOG_POSTS_FILE.exists():
        print(f"‚ùå –§–∞–π–ª {BLOG_POSTS_FILE} –Ω–µ –Ω–∞–π–¥–µ–Ω")
        return
    
    # –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ—Å—Ç—ã
    with open(BLOG_POSTS_FILE, 'r', encoding='utf-8') as f:
        data = json.load(f)
    
    –ø–æ—Å—Ç—ã = data.get('posts', [])
    print(f"üìù –ù–∞–π–¥–µ–Ω–æ –ø–æ—Å—Ç–æ–≤: {len(–ø–æ—Å—Ç—ã)}")
    
    if len(–ø–æ—Å—Ç—ã) < 2:
        print("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ—Å—Ç–æ–≤ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è")
        return
    
    # –ë–µ—Ä–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –¥–≤–∞ –ø–æ—Å—Ç–∞
    –ø–æ—Å–ª–µ–¥–Ω–∏–µ_–¥–≤–∞_–ø–æ—Å—Ç–∞ = –ø–æ—Å—Ç—ã[:2]
    
    print(f"\nüéØ –û–±–Ω–æ–≤–ª—è—é –ø–æ—Å–ª–µ–¥–Ω–∏–µ –¥–≤–∞ –ø–æ—Å—Ç–∞:")
    for i, –ø–æ—Å—Ç in enumerate(–ø–æ—Å–ª–µ–¥–Ω–∏–µ_–¥–≤–∞_–ø–æ—Å—Ç–∞, 1):
        print(f"   {i}. {–ø–æ—Å—Ç.get('title', '–ë–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞')[:60]}...")
    
    # –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ—Å—Ç—ã
    –æ–±–Ω–æ–≤–ª–µ–Ω–æ = 0
    –¥–ª—è_–∏—Å–∫–ª—é—á–µ–Ω–∏—è = []  # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –≤ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏
    
    for –ø–æ—Å—Ç in –ø–æ—Å–ª–µ–¥–Ω–∏–µ_–¥–≤–∞_–ø–æ—Å—Ç–∞:
        —É—Å–ø–µ—Ö = –æ–±–Ω–æ–≤–∏—Ç—å_–ø–æ—Å—Ç(–ø–æ—Å—Ç, –ø–æ—Å—Ç—ã)
        if —É—Å–ø–µ—Ö:
            –æ–±–Ω–æ–≤–ª–µ–Ω–æ += 1
            # –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Å–ø–∏—Å–æ–∫ –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è
            if 'image' in –ø–æ—Å—Ç:
                –¥–ª—è_–∏—Å–∫–ª—é—á–µ–Ω–∏—è.append(–ø–æ—Å—Ç['image'])
    
    if –æ–±–Ω–æ–≤–ª–µ–Ω–æ > 0:
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π JSON
        with open(BLOG_POSTS_FILE, 'w', encoding='utf-8') as f:
            json.dump(data, f, ensure_ascii=False, indent=2)
        print(f"\n‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ –ø–æ—Å—Ç–æ–≤: {–æ–±–Ω–æ–≤–ª–µ–Ω–æ}")
        print(f"üíæ –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ {BLOG_POSTS_FILE}")
    else:
        print(f"\n‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ—Å—Ç—ã")

if __name__ == '__main__':
    main()
